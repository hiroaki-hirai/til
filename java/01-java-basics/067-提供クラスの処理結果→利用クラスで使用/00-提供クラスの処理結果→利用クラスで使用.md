# 提供クラスの処理結果→利用クラスで使用

# Q,

あるクラスの処理後のデータを他のクラスで使用させたいときに使える手法は、委譲の他に何がありますか？
まとめてください。

---

## ✅ 提供クラスの処理結果を利用クラスで使用するための手法一覧

| 手法 | 説明 | 特徴・注意点 |
| --- | --- | --- |
| **1. 委譲（Delegation）** | 提供クラスに処理を委ね、結果を返してもらう | 利用クラスが提供クラスの参照を保持し、メソッド呼び出しで利用 |
| **2. 依存注入（DI）** | 利用クラスの外部から提供クラスのインスタンスを注入 | テストや保守性に優れる。Springなどで一般的 |
| **3. コールバック** | 提供クラスの処理完了時に、あらかじめ渡された利用クラスの処理を呼び出す | 非同期処理やイベント駆動で有効。関数型インタフェースなど利用可 |
| **4. オブザーバ（Observer）** | 提供クラスが変更を通知し、利用クラス（＝リスナー）が反応する | 状態変化に応じた通知に使う。複数クラスへの通知が可能 |
| **5. 戻り値による受け渡し** | 提供クラスのメソッドの戻り値をそのまま利用クラスで使う | 最も基本的な方法。中間にコントローラーを挟むことも多い |
| **6. 引数として渡す（出力引数）** | 利用クラスが提供クラスのメソッドに引数としてオブジェクトを渡し、そこに結果を書き込ませる | 状態変更が明示的になるが、コードが分かりにくくなる場合もある |
| **7. 共通データ保持クラスの利用（DTO・VO）** | 提供クラスがデータオブジェクト（DTO）を返し、それを他のクラスで共有 | オブジェクトの状態を明示的に共有でき、REST APIなどで一般的 |
| **8. 静的フィールドによる共有** | 提供クラスの`static`フィールドに格納し、他のクラスが参照 | グローバル状態の共有だが、結合度が高くなるので注意 |
| **9. キャッシュ / シングルトン管理** | 一度生成したデータをメモリにキャッシュして再利用 | 設計に注意しないとスレッド安全性や整合性に問題が出やすい |

---

## 🧭 使用シーン別の適合例

| 使用シーン | 適した手法 |
| --- | --- |
| シンプルなデータ取得 | 戻り値 / 委譲 |
| 非同期イベント通知 | コールバック / オブザーバ |
| テストしやすい設計 | 依存注入 / DTO共有 |
| 状態管理の共有 | 静的フィールド / キャッシュ |
| REST APIやWebアプリ | DTO / DI / サービス層委譲 |

---

## 🔍 代表的な組み合わせパターン

- **DI + 委譲 + 戻り値**：Springなどでよく使われる基本構造（Controller → Service → Repository）
- **オブザーバ + DTO**：状態通知とデータ受け渡しの分離（イベントドリブン設計）
- **シングルトン + キャッシュ**：処理コストが高い共通データ（例：構成ファイルや外部APIレスポンス）を一括管理

---

必要であれば、個別のパターンごとのコード例や、Hiroakiさんのプロジェクトにおける使い分け提案も可能です。ご希望ありますか？

[DI + 委譲 + 戻り値](%E6%8F%90%E4%BE%9B%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%AE%E5%87%A6%E7%90%86%E7%B5%90%E6%9E%9C%E2%86%92%E5%88%A9%E7%94%A8%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A7%E4%BD%BF%E7%94%A8%2021662cef73508010badcc29d27fe9d41/DI%20+%20%E5%A7%94%E8%AD%B2%20+%20%E6%88%BB%E3%82%8A%E5%80%A4%2021662cef735080fd8290d19e6a1b3878.md)