# メソッド参照

# Q,

メソッド参照について解説してください。

はい、Hiroakiさんのご質問にお答えして、**メソッド参照（method reference）**について分かりやすく解説します。

---

## ✅ 結論：

**メソッド参照は、ラムダ式を簡潔に書くための省略記法**です。

```java
list.forEach(item -> System.out.println(item)); // ラムダ式
list.forEach(System.out::println);              // メソッド参照
```

上記のように、**「メソッドをそのまま渡したい」場合に、`::` を使って参照できます**。

---

## ✅ なぜ使うのか？

- ラムダ式を **さらにシンプル・読みやすく**書ける
- `Consumer`, `Function`, `Supplier`, `Predicate` などの
    
    **関数インタフェースにそのまま適用できる**
    

---

## ✅ 4つの主なパターン

| 形式 | 使用例 | 解説 |
| --- | --- | --- |
| ① クラス名 :: staticメソッド | `Math::abs` | staticメソッドを渡す |
| ② オブジェクト名 :: インスタンスメソッド | `System.out::println` | 特定オブジェクトのメソッドを渡す |
| ③ クラス名 :: インスタンスメソッド | `String::toLowerCase` | 任意のインスタンスのメソッドを呼ぶ（引数で渡される） |
| ④ クラス名 :: new（コンストラクタ参照） | `ArrayList::new` | コンストラクタ呼び出しも可能 |

---

## ✅ パターンごとの具体例

### ① `Math::abs`（staticメソッド参照）

```java
Function<Integer, Integer> absFunc = Math::abs;
System.out.println(absFunc.apply(-10)); // → 10
```

---

### ② `System.out::println`（特定オブジェクトのメソッド参照）

```java
List<String> list = List.of("A", "B", "C");
list.forEach(System.out::println);
```

---

### ③ `String::toUpperCase`（任意インスタンスのメソッド参照）

```java
List<String> list = List.of("a", "b", "c");
List<String> upper = list.stream()
                         .map(String::toUpperCase)
                         .toList(); // → ["A", "B", "C"]
```

- `map(s -> s.toUpperCase())` と同等

---

### ④ `ArrayList::new`（コンストラクタ参照

```java
Supplier<List<String>> listSupplier = ArrayList::new;
List<String> list = listSupplier.get();
```

- `() -> new ArrayList<>()` と同じ意味

---

## ✅ メソッド参照とラムダ式の関係

| ラムダ式 | メソッド参照 |
| --- | --- |
| `s -> s.length()` | `String::length` |
| `() -> new HashMap<>()` | `HashMap::new` |
| `x -> Math.abs(x)` | `Math::abs` |
| `x -> System.out.println(x)` | `System.out::println` |

---

## ✅ まとめ

| 項目 | 説明 |
| --- | --- |
| 用途 | ラムダ式を簡潔に書くための記法 |
| 記法 | `クラス名またはインスタンス :: メソッド名` |
| 使える場面 | 関数インタフェースの引数に使うとき（forEach, map など） |
| メリット | 可読性が高く、コードが短くなる |

---

ご希望があれば、メソッド参照を使うべき場面・避けるべき場面、または stream 処理との組み合わせパターンも詳しくご紹介できます！