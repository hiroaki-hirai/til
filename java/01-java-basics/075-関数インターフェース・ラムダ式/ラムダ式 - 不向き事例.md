# ラムダ式 - 不向き事例

# Q,

「ラムダを使ってはいけないシグナル一覧」をお願いします

以下に、実務において「**この状況になったらラムダ式は避けるべき**」という **シグナル（兆候）** を体系的にまとめました。

---

## 🚨 ラムダを使ってはいけないシグナル一覧

| 🚩 シグナル | 理由・補足 |
| --- | --- |
| 🔁 **処理の行数が多くなってきた（3行以上）** | 読みにくくなり、関心事が不明瞭。メソッド化・クラス化推奨。 |
| 🧩 **ラムダ内で複数のロジックがある**（条件分岐・ループ・try-catchなど） | 単一責任の原則（SRP）に反する。メソッド分離が望ましい。 |
| 🧪 **テストコードを書きづらい／モックできない** | ラムダ式は名前を持たず、モック対象にしにくい。 |
| 🧠 **読み手が「これは何をしているのか」と考えた時点でアウト** | 意図が明確でない＝可読性低。名前付きクラス／メソッドに分離すべき。 |
| 🔧 **ラムダ内で状態（フィールドや外部変数）を使い始めた** | 状態を持つ処理はラムダでは不適。副作用のある処理は分離すべき。 |
| 🔀 **ラムダ式を別の場所に渡して再利用したくなった** | ラムダは再利用困難。具象クラス or Strategy パターンが望ましい。 |
| 🔒 **同期・待機・スレッド間の調整が必要** | 並列処理は明示的な責任分離が必要。ラムダは非推奨。 |
| 🧩 **ラムダが例外処理を含んで try-catch がネストしている** | エラーハンドリングを内包すると視認性・保守性が悪化。 |
| 🧷 **ラムダ内で複数の API 呼び出しがある** | 複数の外部リソースや依存関係を操作している場合、責務が重くなりすぎ。 |
| 🛠 **後でDIしたい、またはSpringで管理したいと感じた** | ラムダはBean化不可。具象クラスで明示定義が必要。 |
| 🧩 **StrategyやTemplate Methodなどのパターンに当てはまる処理** | 設計パターンの原則に沿うには具象クラスが前提。 |

---

## ✅ 逆に「ラムダで十分」なシグナル

| ✅ シグナル | 理由 |
| --- | --- |
| 1〜2行で完結し、ロジックが明快 | 読みやすく、再利用も不要な場面 |
| 条件式・フィルタ・ソート・変換など | Stream API や Comparator、Predicate など |
| 状態を持たない純粋な関数 | 副作用なし／参照透明な処理 |
| コールバック的に一時的に使う | イベントや非同期処理の短い応答用など |

---

## 📌 実務的まとめ

- ✅ 短くて簡単 → ラムダでOK
- ❌ 長くて複雑・状態持ち → 具象クラス or メソッドに分離

---

ご希望があれば、上記シグナルをチェックリスト（Markdown形式）やコードベースのリファクタ例として展開することもできます。