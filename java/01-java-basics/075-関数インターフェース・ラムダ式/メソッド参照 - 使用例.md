# メソッド参照 - 使用例

# Q.

メソッド参照を使うべき場面をお願いします。

はい、Hiroakiさんのご質問にお答えして、

**「メソッド参照を使うべき場面」**を、✅目的別＋💡具体例つきで整理して解説します。

---

## ✅ 結論：**ラムダ式の中で「そのまま1つのメソッドを呼ぶだけ」のとき**

```java
list.forEach(item -> System.out.println(item));  // ⛔ 冗長
list.forEach(System.out::println);               // ✅ メソッド参照で簡潔
```

---

## ✅ メソッド参照を使うべき 5つの場面

---

### ① `forEach()` や `map()` で **ラムダ式が単一メソッド呼び出しだけのとき**

### 💡例：

```java
List<String> list = List.of("apple", "banana", "cherry");

list.forEach(s -> System.out.println(s));       // ⛔
list.forEach(System.out::println);              // ✅
```

### ✅ 利点：

- 可読性が高くなる
- 動作が「副作用のみ」だと分かりやすい

---

### ② `map()` で **オブジェクトのゲッターや変換メソッドを使うとき**

### 💡例：

```java
List<String> list = List.of("java", "GPT");

List<Integer> lengths = list.stream()
                            .map(s -> s.length())        // ⛔
                            .toList();

List<Integer> lengths2 = list.stream()
                             .map(String::length)        // ✅
                             .toList();
```

---

### ③ `sort()` や `Comparator.comparing()` などで **プロパティ比較するだけのとき**

### 💡例：

```java
list.sort((a, b) -> a.getName().compareTo(b.getName()));       // ⛔
list.sort(Comparator.comparing(User::getName));                // ✅
```

---

### ④ `Supplier` や `Constructor` を使って **インスタンス生成だけしたいとき**

### 💡例：

```java
Supplier<List<String>> sup1 = () -> new ArrayList<>();   // ⛔
Supplier<List<String>> sup2 = ArrayList::new;            // ✅
```

---

### ⑤ `Optional`, `Stream`, `collect()` などの中で**変換・表示・格納が明確なとき**

### 💡例：

```java
Optional<String> opt = Optional.of("Hello");
opt.ifPresent(s -> System.out.println(s));               // ⛔
opt.ifPresent(System.out::println);                      // ✅
```

---

## ❗使わない方がいい場面（補足）

| パターン | 理由 |
| --- | --- |
| ラムダの中で**条件分岐**や**複数の処理**をしている場合 | メソッド参照では表現できない |
| **変数代入や複数引数の操作**をする場合 | より明示的な処理が必要 |

---

## ✅ まとめ表：メソッド参照を使うべきタイミング

| シーン | 使うべき？ | 例 |
| --- | --- | --- |
| 単一のメソッド呼び出しだけ | ✅ Yes | `System.out::println` |
| プロパティ取得や変換だけ | ✅ Yes | `User::getName`, `String::length` |
| コンストラクタ参照 | ✅ Yes | `ArrayList::new` |
| 条件分岐や複数ステップの処理 | ❌ No | `x -> { if(...) ... }` |

---

必要があれば、メソッド参照で記述できるパターンを見つける「書き換え演習」などもできますので、遠慮なくどうぞ！