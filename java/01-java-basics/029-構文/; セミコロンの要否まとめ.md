# ; セミコロンの要否まとめ

---

## ✅ Java における「セミコロン不要」の構文一覧表

| 構文カテゴリ | 構文例 | セミコロンが必要か | 解説 |
| --- | --- | --- | --- |
| **制御構文の見出し部** | `if (x > 0)` | ❌ | 条件部の終わりにはセミコロン不要（後にブロックや文が続く） |
|  | `while (x < 5)` | ❌ | `while` の条件も同様に不要 |
|  | `for (int i = 0; i < 10; i++)` | ❌ | `for` 文の**中のセミコロンは必要**（ルール内）、末尾には不要 |
|  | `switch (val)` | ❌ | `switch` キーワード後には不要 |
| **ブロック構文** | `{ ... }` | ❌ | ブロック `{}` 自体にはセミコロン不要 |
| **メソッド宣言** | `void method() {}` | ❌ | メソッド定義にセミコロンは不要 |
| **クラス宣言** | `class MyClass {}` | ❌ | クラス定義にも不要 |
| **インタフェース宣言** | `interface MyInterface {}` | ❌ | インタフェース定義にも不要 |
| **列挙型宣言** | `enum Color { RED, GREEN, BLUE }` | ❌（例外あり） | 列挙子のあとにメソッドを書く場合は`;`が必要になる例外あり |

---

## ⚠️ 特殊な注意点

### 1. `for` 文の中のセミコロンは必要

```java
for (int i = 0; i < 10; i++) // ← 文末には不要だが、内部の2つのセミコロンは必要
```

### 2. 空文（semicolons alone）は1つの文として扱われる

```java
while (true); // ← これは空文（何もしない）→ 無限ループの原因になることも
```

### 3. `enum` で列挙子のあとにフィールドやメソッドを書くときはセミコロンが必要

```java
enum Color {
    RED, GREEN, BLUE; // ← ここにセミコロン必要！
    public void print() { System.out.println(this); }
}
```

---

## ✅ ブロックのあとにセミコロンが「必要／許可される」代表例

| パターン | セミコロン要否 | 解説 |
| --- | --- | --- |
| `switch` 式（Java 14以降） | **必要** | 値を返す式なので、代入や return に使う場合は末尾にセミコロンが必要 |
| **初期化ブロック（インスタンス／static）** | **許可されるが通常は不要** | 文法的にはセミコロンを付けてもエラーにはならない（ただし意味はない） |
| **ラムダ式の本体がブロックである場合** | **文の中で使われるなら末尾にセミコロンが必要** | 代入やメソッド引数として使われるとき、ラムダ式**全体にセミコロンが必要** |
| **匿名クラスの定義** | **必要** | `new Interface() { ... };` のように、オブジェクト式の末尾にセミコロンが必要 |
| **try-with-resources のブロック内** | **セミコロンはリソース区切りに使われる** | ブロック後ではなく、tryのリソース定義内でセミコロンが必要なケースがある |

---

### 🔍 それぞれのコード例と補足

---

### 1. ✅ `switch` 式（再掲）

```java
String result = switch (value) {
    case 1 -> "One";
    default -> "Other";
}; // ← ここにセミコロンが必要
```

---

### 2. ✅ 匿名クラス（`new SomeInterface() { ... };`）

```java
Runnable r = new Runnable() {
    @Override
    public void run() {
        System.out.println("Run!");
    }
}; // ← これは new 式なのでセミコロンが必須
```

---

### 3. ✅ ラムダ式（代入や引数で使う場合）

```java
Runnable r = () -> {
    System.out.println("Hello");
}; // ← ラムダ式の代入なのでセミコロンが必要
```

---

### 4. ⚠️ 初期化ブロック（セミコロンは不要、ただしエラーにはならない）

```java
{
    System.out.println("Instance initializer");
}; // ← セミコロンは不要だが、文法的には許容される
```

```java
static {
    System.out.println("Static initializer");
}; // 同様
```

※ これらにセミコロンを付けると「空文」が追加されるだけで実害はないが、**可読性が下がるため通常は書かない**

---

### 5. ⚠️ try-with-resources におけるリソース列

```java
try (Scanner sc = new Scanner(System.in); FileWriter fw = new FileWriter("log.txt")) {
    // セミコロンでリソースを区切るが、try ブロックの後ろには付けない
}
```

---

## ✅ まとめ：switch式以外で「ブロックのあとにセミコロンが関係する」もの一覧

| パターン | セミコロン必要？ | 用途のポイント |
| --- | --- | --- |
| switch式 | 必要 | 式として使われるため（return/代入など） |
| 匿名クラス | 必要 | `new SomeClass() { ... };` は1つの文 |
| ラムダ式 | 必要 | `Runnable r = () -> { ... };` のように式全体に対して必要 |
| 初期化ブロック | 不要（許容） | セミコロンを書いても空文になるだけ |
| try-with-resources | 内部にセミコロン必要 | ブロック後にはつけない、リソースの区切り用途 |