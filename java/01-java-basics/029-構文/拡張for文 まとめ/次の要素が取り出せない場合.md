# 次の要素が取り出せない場合

# Q、

拡張for文にて、次の要素を取り出せない場合はどうなりますか？

良い質問です！

Javaの**拡張for文（enhanced for loop）**では、「次の要素を取り出せない（＝もう要素が残っていない）」場合には、**自動的にループを終了します**。**例外は発生しません**。

---

## ✅ 拡張for文の基本構文

```java
for (型 変数 : 配列またはコレクション) {
    // 要素に対する処理
}
```

---

## 🔹 要素が尽きたときの動作

拡張for文は内部的に **イテレータ**や **インデックスカウンタ**を使って要素を順に処理していますが、

- **要素がもうない**と判断された時点で、
- **自動的にループを終了**します。

```java
int[] nums = {1, 2, 3};

for (int n : nums) {
    System.out.println(n);
}
```

上記のようなコードでは、

- 1 → 2 → 3 と順に出力され、
- その後、何もせず終了します。

### ❌ `NoSuchElementException` のような例外は発生しません。

---

## 🔸 対比：Iteratorとの違い

通常の `Iterator` を使うと、`next()` を呼びすぎると例外になります：

```java
List<String> list = List.of("A", "B");
Iterator<String> it = list.iterator();

while (true) {
    System.out.println(it.next()); // 3回目で例外発生
}
```

### 出力：

```java
A
B
→ java.util.NoSuchElementException
```

拡張for文は **この例外処理を内部で吸収**して、例外が出ないようになっています。

---

## ✅ まとめ

| 状況 | 拡張for文の動作 | 通常のIterator |
| --- | --- | --- |
| 次の要素がない | ループ終了 | `NoSuchElementException` 発生 |
| 空の配列やリスト | 何も処理せず終了 | 処理なし、例外なし |
| 途中でbreak可能 | `break` で手動中断可能 | 同様に可能 |

---

必要であれば、「拡張for文でインデックスを使いたい場合」や「配列をforEachで扱うときの違い」もご説明できます！