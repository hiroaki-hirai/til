# インターフェイス、クラス

# Q、

JDBC関連のインターフェイス、例外クラス、DBMS共用のクラスを整理してください。

はい、Hiroakiさん。Java Gold試験で意識すべき **JDBC関連のインタフェース・例外クラス・共用クラス** を、機能別に整理してご説明します。

---

## ✅ JDBC関連の主要インターフェース

| インターフェース | 主な役割 | 継承関係・備考 |
| --- | --- | --- |
| `java.sql.Driver` | JDBCドライバの登録・接続 | ドライバ提供側が実装 |
| `java.sql.DriverManager` | 接続の取得（実際はクラス） | JDBCドライバの管理 |
| `java.sql.Connection` | データベース接続管理 | トランザクションやステートメント生成 |
| `java.sql.Statement` | SQL文の実行 | 文字列SQLをそのまま実行 |
| `java.sql.PreparedStatement` | パラメータ付きSQL | `Statement`のサブインターフェース |
| `java.sql.CallableStatement` | ストアドプロシージャの実行 | `PreparedStatement`のサブ |
| `java.sql.ResultSet` | クエリ結果の取得 | 行・列の走査・取得など |
| `java.sql.ResultSetMetaData` | `ResultSet`の列情報 | 列名・型などの取得 |
| `java.sql.DatabaseMetaData` | DB全体の情報 | DB名、バージョンなど |
| `java.sql.Savepoint` | セーブポイント制御 | トランザクション中の一時停止点 |
| `java.sql.Wrapper` | 実装ラッパー取得 | `unwrap()`や`isWrapperFor()`を定義（defaultメソッド） |

---

## ✅ JDBCで使う代表的な例外クラス

| クラス名 | 概要 | 特徴 |
| --- | --- | --- |
| `java.sql.SQLException` | JDBCの基本的な例外 | すべてのSQL関連例外のスーパークラス |
| `SQLSyntaxErrorException` | SQL構文エラー | 文法ミスや無効な構文 |
| `SQLTimeoutException` | タイムアウト関連 | クエリや接続のタイムアウト |
| `SQLIntegrityConstraintViolationException` | 一意制約違反など | PRIMARY KEY, FOREIGN KEY制約違反など |
| `SQLTransactionRollbackException` | ロールバック例外 | トランザクション競合など |
| `SQLNonTransientConnectionException` | 永続的接続障害 | 接続自体が無効になっている |

> これらはすべて SQLException を継承しており、必要に応じてキャッチを細分化できます。
> 

---

## ✅ JDBCで共通に使う便利クラス・構造体的クラス

| クラス名 | 概要 |
| --- | --- |
| `java.sql.Types` | SQLのデータ型定数群（`VARCHAR`, `INTEGER`, `DATE`など） |
| `java.sql.DriverManager` | JDBCドライバの登録・接続の入口。実質的にファクトリ的役割 |
| `java.sql.Date`, `Time`, `Timestamp` | SQL日付・時刻型に対応するクラス（`java.util.Date` とは別） |
| `javax.sql.DataSource` | コネクションプールなどに使う接続オブジェクトの生成元（上級者向け） |

---

## ✅ インターフェース関係図（簡略）

```java
      +--------------------+
      |   java.sql.Driver  | <--- JDBCドライバの実装
      +--------------------+

               |
               v
      +------------------------+
      |  DriverManager (クラス) | --- getConnection()
      +------------------------+

               |
               v
      +----------------+
      |  Connection    |
      +----------------+
          |       |     \
          v       v      v
     Statement  Prepared  Callable
                  |
                  v
              ResultSet
```

---

## ✅ Java Gold試験で特に重要な項目

| カテゴリ | チェックポイント |
| --- | --- |
| インターフェース | 継承関係（e.g., PreparedStatement extends Statement） |
| 例外 | `SQLException`のキャッチと派生クラスの使い分け |
| リソース管理 | `AutoCloseable`との関係（try-with-resources） |
| `ResultSet` | `next()`や`getXxx()`メソッドの使い方 |
| トランザクション制御 | `setAutoCommit()`, `commit()`, `rollback()` |

---

ご希望であれば、この内容を **表形式のPDF** や **Gold試験風の練習問題** にも展開できます。必要であればお知らせください！