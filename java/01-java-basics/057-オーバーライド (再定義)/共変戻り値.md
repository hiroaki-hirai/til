# 共変戻り値

# Q,

共変戻り値は、オーバーライドの項目のみの機能ですか？

はい、Hiroakiさんのご認識は**基本的に正しいです**。

「共変戻り値（**covariant return type**）」は、**オーバーライドにおいてのみ使える機能**です。

---

## ✅ 結論：

> 共変戻り値（covariant return type）とは、オーバーライド時に、親クラスまたはインターフェースのメソッドの戻り値型のサブクラスを返せる機能です。
> 
> 
> この機能は **「オーバーライドの場面」でのみ適用されます。**
> 

---

## 🔍 詳細解説

### 🔸 例：共変戻り値の典型的な使用

```java
class Animal { }
class Dog extends Animal { }

class Parent {
    Animal getAnimal() {
        return new Animal();
    }
}

class Child extends Parent {
    @Override
    Dog getAnimal() {  // ✅ 共変戻り値：Animal → Dog（サブクラス）
        return new Dog();
    }
}
```

このように、**戻り値がサブタイプであればオーバーライドと見なされ、コンパイルOK**になります。

→ Java 5 以降でサポートされています。

---

## 🔸 対象外のケース（使えない場面）

| シーン | 共変戻り値適用可否 | 理由 |
| --- | --- | --- |
| **オーバーロード** | ❌ 不可 | 戻り値だけ異なるのはオーバーロードとして認識されない（コンパイルエラー） |
| **オーバーライド以外のメソッド** | ❌ 不可 | 共変戻り値はあくまで「同じ名前・引数のメソッドを再定義する」際にのみ意味がある |
| **staticメソッド** | ❌ 不可 | staticメソッドはオーバーライドの対象外（**隠蔽**になる）ため共変戻り値は使えない |

---

## ✅ まとめ

| 特性 | 内容 |
| --- | --- |
| 適用場面 | ✅ オーバーライドのみ |
| 条件 | 戻り値が「元メソッドの戻り値のサブクラス」であること |
| 適用不可 | オーバーロード、staticメソッド、シグネチャが異なるメソッド |
| 利用目的 | より具体的な戻り値型を返せるようにして利便性と型安全性を両立する |

---

ご希望があれば、「共変戻り値＋ジェネリクス」や「オーバーライド vs オーバーロードの型ルール」についても深掘りできますよ！