# 不可ケース

# Q,

オーバーライドができないケースをまとめてください。

はい、Hiroakiさん。

Javaにおいて「**オーバーライドができないケース**」を体系的にまとめました。

例付きでわかりやすく整理します。

---

## ✅ Javaで**オーバーライドできないケース一覧**

| ケース | 内容 | 解説・例 |
| --- | --- | --- |
| 1. **staticメソッド** | ❌ オーバーライド不可（**隠蔽（hiding）扱い**） | staticはクラスに属するため、ポリモーフィズム対象外 |
| 2. **finalメソッド** | ❌ オーバーライド不可 | finalで定義されたメソッドは拡張禁止 |
| 3. **privateメソッド** | ❌ オーバーライド不可 | そもそもサブクラスから見えない（隠蔽される） |
| 4. **コンストラクタ** | ❌ オーバーライド不可 | コンストラクタはオーバーライドの対象外（継承されない） |
| 5. **異なる引数リスト（オーバーロードになる）** | ❌ オーバーライドではなくオーバーロード | 引数が異なるとシグネチャが一致しないため別メソッド扱い |
| 6. **共変戻り値違反** | ❌ オーバーライド不可 | 戻り値が元のメソッドと無関係な型（サブ型でない） |
| 7. **アクセス修飾子がより厳しい** | ❌ オーバーライド不可 | public → protected のように制限は強められない |
| 8. **例外の扱いが不適切**（検査例外） | ❌ オーバーライド不可 | throws節で親より広い例外を宣言できない（ただし非検査例外はOK） |
| 9. **抽象メソッドにfinalをつけた場合（理論的に）** | ❌ エラー | 意味的に矛盾するため、そもそもコンパイルエラー |
| 10. **static contextでthis/super呼び出しを含む場合** | ❌ エラー | JVMの実行原理に反する（例：staticメソッドでsuper.method()はNG） |

---

## 🔍 代表例のコード解説

### 1. `static` メソッドはオーバーライド不可（**隠蔽される**）

```java
class Parent {
    static void greet() {
        System.out.println("Hello from Parent");
    }
}
class Child extends Parent {
    static void greet() { // ✅ コンパイルOK だがこれは「オーバーライド」ではない
        System.out.println("Hello from Child");
    }
}
```

---

### 2. `final` メソッドはオーバーライド不可

```java
class Parent {
    final void greet() { }
}
class Child extends Parent {
    // ❌ コンパイルエラー：finalメソッドはオーバーライドできない
    // void greet() { }
}
```

---

### 3. `private` メソッドは見えないのでオーバーライド不可（**別物になる**）

```java
class Parent {
    private void secret() { }
}
class Child extends Parent {
    void secret() { } // ✅ 別の新しいメソッド（オーバーライドではない）
}
```

---

### 4. **アクセス修飾子を制限方向に変更するのはNG**

```java
class Parent {
    public void greet() { }
}
class Child extends Parent {
    // ❌ protected void greet() { } // エラー：アクセスを制限できない
}
```

---

### 5. **throws節で親より広い例外はダメ（検査例外）**

```java
class Parent {
    void work() throws IOException { }
}
class Child extends Parent {
    // ❌ void work() throws Exception { } // エラー：Exception は IOException より広い
}
```

---

## ✅ 補足：オーバーライドできる条件

| 条件 | 内容 |
| --- | --- |
| メソッド名 | 同じであること |
| 引数リスト | 同じ（シグネチャ一致）であること |
| 戻り値型 | 同じ、または共変（サブクラス型）であること |
| アクセス修飾子 | 元のメソッドと同じか、より**公開**方向であること |
| 例外宣言 | 元のメソッドと同じか、それより**狭い検査例外**を宣言すること |

---

ご希望があれば、オーバーライドとオーバーロードの違い、またはコンパイルエラーと実行時バインディングの挙動についても掘り下げられます！