# 隠蔽

# Q、

隠蔽 (継承) の場合のパターンは何通りで、どのようなものがありますか？

とても良い質問です！

**隠蔽（hiding）**は、**継承関係にあるクラス間で、スーパークラスのメンバ（変数・メソッド）をサブクラスで「同名で定義」することで、スーパークラスの定義が見えなくなる現象**です。

---

## 🔍 隠蔽の主なパターン（Java）

Javaで「隠蔽」が起こるパターンは主に次の **3通り** です：

| パターン | 対象 | 解説 |
| --- | --- | --- |
| ① **フィールドの隠蔽** | 変数（static/非static） | サブクラスが同名の変数を定義 |
| ② **static メソッドの隠蔽** | static メソッド | サブクラスが同名・同シグネチャで static メソッドを定義 |
| ③ **インナークラスの隠蔽** | クラス定義 | サブクラスがスーパークラスの内部クラスと同名の内部クラスを定義 |

---

## ✅ ① フィールドの隠蔽（field hiding）

```java
class Super {
    int value = 10;
}

class Sub extends Super {
    int value = 20; // ← Super.value を隠している（hiding）
}
```

### 挙動：

```java
Sub sub = new Sub();
System.out.println(sub.value);      // → 20（Sub側）
System.out.println(((Super)sub).value); // → 10（Super側）
```

- 参照時の型によって **隠蔽されたフィールドかどうかが変わる** のがポイント。

---

## ✅ ② static メソッドの隠蔽（method hiding）

```java
class Super {
    static void greet() {
        System.out.println("Hello from Super");
    }
}

class Sub extends Super {
    static void greet() {
        System.out.println("Hello from Sub");
    }
}
```

### 挙動：

```java
Sub.greet();             // → Hello from Sub
Super.greet();           // → Hello from Super

Super s = new Sub();
s.greet();               // → Hello from Super（注意！staticメソッドは参照型で決まる）
```

- static メソッドは **オーバーライド不可**。
    
    → サブクラスに同名で定義しても「**隠蔽**」になる。
    

---

## ✅ ③ インナークラスの隠蔽（nested class hiding）

```java
class Super {
    class Inner {
        void say() {
            System.out.println("Super.Inner");
        }
    }
}

class Sub extends Super {
    class Inner { // ← Super.Inner を隠している
        void say() {
            System.out.println("Sub.Inner");
        }
    }
}
```

### 挙動：

```java
Super.Inner si = new Super().new Inner(); // → Super.Inner
Sub.Inner   ii = new Sub().new Inner();   // → Sub.Inner
```

- このように、内部クラスでも隠蔽は発生する。

---

## ⚠️ 補足：**オーバーライドと隠蔽の違い**

| 特徴 | オーバーライド（override） | 隠蔽（hiding） |
| --- | --- | --- |
| 対象 | 非staticメソッド | staticメソッド、フィールド、インナークラス |
| 実行時に動的決定 | ✅（多態性あり） | ❌（参照型で決定） |
| `@Override` 可 | ✅ | ❌（エラーになる） |

---

## ✅ まとめ：隠蔽が起こるのはこの3パターン！

| 隠蔽の対象 | 具体例 | 参照型によって動作が変わる？ |
| --- | --- | --- |
| フィールド | `int value` | ✅ 参照型に依存 |
| staticメソッド | `static void greet()` | ✅ 参照型に依存 |
| インナークラス | `class Inner` | ✅ 参照型に依存 |

---

もし「実践的なコード例」や「Eclipseでの挙動確認のポイント」など気になる点があれば、追加でサポートします！