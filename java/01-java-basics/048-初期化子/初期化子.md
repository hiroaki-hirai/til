# 初期化子

以下に Java Silver〜Gold 試験レベルを意識した「**初期化子（イニシャライザ）に関するパターン問題**」を出題形式でまとめます。

---

## ✅ 初期化子（イニシャライザ）とは？

Javaでは以下の3種類の初期化手段があります：

| 種類 | タイミング | キーワード |
| --- | --- | --- |
| **インスタンス初期化子** | インスタンス生成時 | `{ ... }` |
| **static 初期化子** | クラスロード時（1回限り） | `static { ... }` |
| **フィールド初期化** | 変数宣言と同時 | `int x = 10;` など |

---

## ✅ パターン問題①：インスタンス初期化子の動作

```java
class Sample {
    int x;

    {
        x = 5;
        System.out.println("Instance initializer");
    }

    Sample() {
        System.out.println("Constructor");
    }

    public static void main(String[] args) {
        new Sample();
    }
}
```

```java
Instance initializer  
Constructor
```

**正解：B**

**解説：**

インスタンス初期化子 `{ ... }` はコンストラクタの**直前**に実行される。

---

## ✅ パターン問題②：static 初期化子の実行タイミング

```java
class Sample {
    static {
        System.out.println("Static initializer");
    }

    public static void main(String[] args) {
        System.out.println("Main");
    }
}
```

```java
Static initializer  
Main
```

**正解：B**

**解説：**

static初期化子は**クラスが最初にロードされたタイミングで1度だけ**実行される。

---

## ✅ パターン問題③：フィールド初期化との実行順

```java
class Sample {
    int x = 1;

    {
        x = 2;
    }

    Sample() {
        x = 3;
    }

    public static void main(String[] args) {
        Sample s = new Sample();
        System.out.println(s.x);
    }
}
```

### Q3. 実行結果として正しいものは？

A. 1

B. 2

C. 3

D. コンパイルエラー

**正解：C**

**実行順：**

1. フィールド初期化 → `x = 1;`
2. インスタンス初期化子 → `x = 2;`
3. コンストラクタ → `x = 3;`

---

## ✅ パターン問題④：static初期化子の実行回数

```java
class Sample {
    static {
        System.out.println("Static block");
    }

    Sample() {
        System.out.println("Constructor");
    }

    public static void main(String[] args) {
        new Sample();
        new Sample();
    }
}
```

```java
Static block  
Constructor  
Constructor
```

**正解：A**

**解説：**

static初期化子はクラスが**最初に読み込まれたとき1回だけ**実行される。

---

## ✅ パターン問題⑤：初期化子の順序の入れ替え

```java
class InitOrder {
    static int count = 0;

    {
        count++;
        System.out.println("Instance block: " + count);
    }

    InitOrder() {
        count++;
        System.out.println("Constructor: " + count);
    }

    static {
        System.out.println("Static block");
    }

    public static void main(String[] args) {
        new InitOrder();
        new InitOrder();
    }
}
```

### Q5. 出力として正しいものは？

A.

```java
Static block  
Instance block: 1  
Constructor: 2  
Instance block: 3  
Constructor: 4
```

**正解：A**

---

## ✅ まとめ：初期化の実行順

| 順番 | 内容 | タイミング |
| --- | --- | --- |
| 1 | staticフィールドの初期化 | クラスロード時 |
| 2 | static初期化子（`static {}`） | クラスロード時 |
| 3 | インスタンスフィールドの初期化 | インスタンス生成時 |
| 4 | インスタンス初期化子（`{}`） | インスタンス生成時 |
| 5 | コンストラクタ | 最後に実行される |