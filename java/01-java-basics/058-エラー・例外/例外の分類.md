# 例外の分類

# Q,

上記の質問の潜在的な意図は、例外の特定や分類にありました。
配列の存在しないインデックスを指定するなどの構文ルール上の違反？やnullの状態での処理のようなあるものがないことで発生するエラーなど例外の種類をまとめることで、例外を特定でき、例外処理のコーディングの一助になるように思います。
上記の観点から例外をまとめてください。

Hiroakiさんの意図、とても重要な観点です。

**「例外を分類・整理することで、エラー発生の特定と例外処理の設計を論理的に行う」**という目的に沿って、例外を次の観点で体系的に整理します。

---

# ✅ Java例外の分類：構造と状態の破綻に着目した体系的まとめ

---

## ① 📌 **構文・構造違反系（構造上成立しない）**

> 「構文的に存在しないものを使おうとした」「データ構造に違反した」など
> 

| 例外クラス | 発生原因 | 説明 |
| --- | --- | --- |
| `ArrayIndexOutOfBoundsException` | 配列の範囲外インデックスアクセス | 存在しない位置へのアクセス |
| `StringIndexOutOfBoundsException` | 文字列の範囲外にアクセス | `"abc".charAt(10)` など |
| `IndexOutOfBoundsException` | リストなどのコレクションで無効な位置にアクセス | 汎用的なインデックス違反 |
| `ClassCastException` | 不正な型変換 | `Object` を誤ってダウンキャスト |
| `IllegalArgumentException` | メソッド引数が無効 | 引数が想定された制約に反している |
| `IllegalStateException` | オブジェクトの状態が処理に適さない | 準備できていない状態でメソッド呼び出し |

---

## ② ❌ **存在しない・未定義の参照（Null/なし）**

> 「何かがある前提で処理をしたが、実際には存在しなかった」
> 

| 例外クラス | 発生原因 | 説明 |
| --- | --- | --- |
| `NullPointerException` | `null` 参照にアクセス | 値が未代入や未設定 |
| `NoSuchElementException` | `Optional.get()` などで値が存在しない | `Iterator.next()` でも発生 |
| `FileNotFoundException` | 指定したファイルが存在しない | ファイル入出力時によく起きる |
| `SQLException`（一部） | 存在しないDBの行やカラムの参照 | データの欠如 |

---

## ③ 🔁 **状態・ライフサイクル違反（順序・タイミングの破綻）**

> 「使ってはいけないタイミングで使った」「終わっているのに操作した」
> 

| 例外クラス | 発生原因 | 説明 |
| --- | --- | --- |
| `IllegalStateException` | 状態が無効なタイミングで呼び出した | 例：close() 後に read() |
| `ClosedChannelException` | NIOチャンネルがすでに閉じられている | ストリームなどの早期クローズ |
| `AlreadyClosedException`（Apacheなど） | DB・リソースが閉じられている | ライブラリによって独自の例外名 |

---

## ④ 🔗 **外部システム依存（IO・DB・ネットワーク）**

> 「外部リソースが利用できない」「通信できない」
> 

| 例外クラス | 発生原因 | 説明 |
| --- | --- | --- |
| `IOException` | ファイルやネットワークの入出力失敗 | 抽象的な I/O エラー全般 |
| `SocketException` | ネットワーク通信エラー | 接続失敗・切断など |
| `UnknownHostException` | 解決できないホスト名 | DNS名解決失敗 |
| `SQLException` | DB接続、クエリ失敗など | JDBCやORMでよく使われる |

---

## ⑤ 🧮 **演算・計算エラー**

> 「数学的に意味がない操作」「桁あふれ」
> 

| 例外クラス | 発生原因 | 説明 |
| --- | --- | --- |
| `ArithmeticException` | 割り算の除数が0 | `int x = 1 / 0;` |
| `NumberFormatException` | 数値文字列でないものを数値変換しようとした | `"abc"` → `Integer.parseInt()` など |

---

## ⑥ 🧰 **リフレクション・クラスロード関連（高度）**

> 「実行時にクラスやメソッドが見つからない」
> 

| 例外クラス | 発生原因 | 説明 |
| --- | --- | --- |
| `ClassNotFoundException` | 指定クラスが見つからない | リフレクションやクラスローダ |
| `NoSuchMethodException` | 指定メソッドが存在しない | リフレクション使用時 |
| `InstantiationException` | インスタンス化できない（抽象クラスなど） | `newInstance()` 実行時など |

---

## ✅ 使用用途：例外処理設計の観点

### ✔ どこで try-catch を使うか？

→ 外部要因が絡む部分（ファイル・DB・通信など）は基本的に try-catch。

→ 内部ロジック違反（構造・引数）は **事前バリデーションやテストで防ぐ方がよい**。

### ✔ catch の粒度を決める

- 状態異常（`IllegalStateException` など）はまとめてログだけ
- 通信エラーや `IOException` はリトライ処理を書く、など

---

## ✅ 補足：Checked vs Unchecked で分類するなら？

| 種類 | 主な例外 | 備考 |
| --- | --- | --- |
| Checked | `IOException`, `SQLException`, `ClassNotFoundException` | try-catch 必須 |
| Unchecked | `NullPointerException`, `IllegalArgumentException`, `ArrayIndexOutOfBoundsException` | RuntimeException のサブクラス |

---

## ✅ まとめ：Hiroakiさんの意図に応える整理軸

- ✅ **「値がない」「構造が不正」「外部要因が失敗」などの観点で分類**
- ✅ **例外が発生する理由に応じた catch やバリデーション戦略が立てられる**
- ✅ **未然に防げるものと、防げないものを分けて処理設計ができる**

---

ご希望があれば、「例外種類ごとの対処法テンプレート集」や、「Javaの独自例外設計（カスタム例外）」のまとめもご用意できます。必要なテーマがあれば教えてください！