# チェック例外

# Q,

Exceptionクラスのサブクラスは、RuntimeExceptionとそのサブクラスを除いて、すべてチェック例外ということですが、どのような例外が挙げられますか？

はい、Hiroakiさんの理解通りです。

Javaにおける `Exception` クラスのサブクラスは、`RuntimeException` とそのサブクラスを除くと、すべて **チェック例外（Checked Exceptions）** に分類されます。

チェック例外は、**コンパイル時に例外処理（try-catch または throws）を強制される例外**で、主に「**外部要因により失敗し得る処理**」に使われます。

---

# ✅ チェック例外（Checked Exception）の代表的な例と分類

---

## 📁 1. 入出力関連（I/O系） – `IOException` 系

| クラス名 | 内容 |
| --- | --- |
| `IOException` | 入出力全般のエラー（抽象基底クラス） |
| └ `FileNotFoundException` | 指定されたファイルが存在しない |
| └ `EOFException` | ストリームの終端に到達 |
| └ `InterruptedIOException` | I/O中に割り込みが発生 |
| └ `ObjectStreamException` | シリアライズ関連の失敗 |
| └ `UnsupportedEncodingException` | サポートされていない文字エンコーディング指定 |

---

## 🗃️ 2. データベース関連 – `SQLException` 系

| クラス名 | 内容 |
| --- | --- |
| `SQLException` | SQL実行エラー（接続失敗・文法ミスなど） |
| └ `SQLTimeoutException` | タイムアウトが発生した |
| └ `SQLIntegrityConstraintViolationException` | 制約違反（ユニークキー・外部キーなど） |
| └ `SQLSyntaxErrorException` | 文法エラー |

---

## 📦 3. クラスロード／リフレクション関連

| クラス名 | 内容 |
| --- | --- |
| `ClassNotFoundException` | 指定されたクラスが見つからない（Class.forNameなど） |
| `InstantiationException` | インスタンス生成に失敗（抽象クラスなど） |
| `IllegalAccessException` | アクセス不能なメソッドやコンストラクタにアクセス |
| `InvocationTargetException` | リフレクション経由の呼び出し先が例外をスローした |
| `NoSuchMethodException` | 指定されたメソッドが存在しない |

---

## 🔄 4. 並行処理・スレッド関連

| クラス名 | 内容 |
| --- | --- |
| `InterruptedException` | スレッドの `sleep` や `wait` 中に割り込まれた場合 |
| `ExecutionException` | 非同期タスク（例：Future）で例外が発生した場合 |

---

## 🎯 5. カスタム・アプリケーション独自例外

- 業務系アプリでは `Exception` を継承して、独自の **チェック例外** を定義することもあります：

```java
public class InvalidOrderException extends Exception {
    public InvalidOrderException(String message) {
        super(message);
    }
}
```

→ このような例外は **業務的な「処理不能な状況」** を伝えるために使われます。

---

## ✅ チェック例外の特徴と設計上の使いどころ

| 観点 | 内容 |
| --- | --- |
| 強制的な例外対処 | `try-catch` または `throws` を書かないとコンパイルエラー |
| 外部要因に起因する | ファイル・DB・ネットワーク・反射など、外部とのやりとり |
| 意図的にスローされる | 独自のビジネスルール違反を表すチェック例外も多い |

---

## 🔄 参考：チェック例外 vs 非チェック例外（まとめ）

| 観点 | チェック例外（`Exception`） | 非チェック例外（`RuntimeException`） |
| --- | --- | --- |
| コンパイル時に強制される | ✅ Yes | ❌ No |
| 典型的な用途 | I/O、DB、クラス操作、スレッドなど | プログラマミス、null、範囲外など |
| 防止方法 | try-catchまたはthrows | 入力チェックやコード改善で予防 |

---

## ✅ よく使うチェック例外（一覧まとめ）

| 分類 | 主なチェック例外 |
| --- | --- |
| I/O | `IOException`, `FileNotFoundException` |
| DB | `SQLException`, `SQLTimeoutException` |
| クラス関連 | `ClassNotFoundException`, `NoSuchMethodException` |
| 並行処理 | `InterruptedException`, `ExecutionException` |
| リフレクション | `IllegalAccessException`, `InvocationTargetException` |
| 独自設計 | `InvalidXxxException`（業務ルール違反） |

---

必要であれば、「チェック例外をどう設計・命名すべきか（独自例外設計ガイド）」や「チェック例外とOptional・戻り値の関係設計」についても詳しく解説できます。気になるテーマがあればお知らせください。