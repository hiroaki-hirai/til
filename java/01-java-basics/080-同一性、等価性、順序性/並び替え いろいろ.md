# ä¸¦ã³æ›¿ãˆ ã„ã‚ã„ã‚

# Q,

Listã«ã¦ã€è‡ªç„¶é †åºã§ä¸¦ã³æ›¿ãˆãŸã„å ´åˆã¯ã©ã†ã—ãŸã‚‰è‰¯ã„ã§ã™ã‹ï¼Ÿ

ã¯ã„ã€`List` ã‚’ **è‡ªç„¶é †åºï¼ˆnatural orderï¼‰**ã§ä¸¦ã³æ›¿ãˆãŸã„å ´åˆã¯ã€Javaã§ã¯ä»¥ä¸‹ã®æ–¹æ³•ã§ç°¡å˜ã«å®Ÿç¾ã§ãã¾ã™ã€‚

---

## âœ… æ–¹æ³•ï¼š`Collections.sort(list)` ã‚’ä½¿ã†

```java
Collections.sort(list);
```

ã“ã®æ–¹æ³•ã¯ã€**ãƒªã‚¹ãƒˆå†…ã®è¦ç´ ãŒ `Comparable` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹**ã“ã¨ãŒå‰æã§ã™ã€‚

`String`, `Integer`, `Double`, `LocalDate` ãªã©ã€Javaæ¨™æº–ã‚¯ãƒ©ã‚¹ã®å¤šããŒ `Comparable` ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

---

## âœ… ä½¿ç”¨ä¾‹

```java
import java.util.*;

public class NaturalOrderSort {
    public static void main(String[] args) {
        List<String> names = Arrays.asList("Sato", "Tanaka", "Kobayashi", "Abe");

        Collections.sort(names); // è‡ªç„¶é †åºï¼ˆè¾æ›¸é †ï¼‰ã§ã‚½ãƒ¼ãƒˆ

        System.out.println(names); // [Abe, Kobayashi, Sato, Tanaka]
    }
}
```

---

## âœ… è‡ªç„¶é †åºã¨ã¯ï¼Ÿ

| ã‚¯ãƒ©ã‚¹ | è‡ªç„¶é †åºã®å®šç¾© |
| --- | --- |
| `String` | Unicodeã«åŸºã¥ã„ãŸè¾æ›¸é † |
| `Integer` | æ•°å€¤ã¨ã—ã¦æ˜‡é † |
| `LocalDate` | æ—¥ä»˜ã¨ã—ã¦æ—©ã„é † |

â¡ ã€Œ**compareTo() ã®æˆ»ã‚Šå€¤ã«åŸºã¥ãé †åº**ã€ãŒè‡ªç„¶é †åºã§ã™ã€‚

---

## âœ… è£œè¶³ï¼šComparatorã‚’ä½¿ã†å ´åˆï¼ˆæ˜ç¤ºçš„ã«è‡ªç„¶é †ï¼‰

```java
list.sort(Comparator.naturalOrder()); // Java 8ä»¥é™ã®æ–¹æ³•
```

ã“ã¡ã‚‰ã‚‚è‡ªç„¶é †åºã«ãªã‚Šã¾ã™ãŒã€`sort()` ãƒ¡ã‚½ãƒƒãƒ‰ã®ä¸­ã§ Comparator ã‚’æ˜ç¤ºã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚ŠæŸ”è»Ÿãªæ›¸ãæ›ãˆãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

---

## âœ… ã¾ã¨ã‚

| æ–¹æ³• | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å‚™è€ƒ |
| --- | --- | --- |
| `Collections.sort(list)` | Java 1.2ã€œ | å¤å…¸çš„ã ãŒåºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ |
| `list.sort(Comparator.naturalOrder())` | Java 8ã€œ | ã‚ˆã‚ŠæŸ”è»Ÿãƒ»é–¢æ•°å‹çš„ã«æ›¸ã‘ã‚‹ |

# Q,

Listã‚’è‡ªç„¶é †ã®é€†é †ã§ä¸¦ã³ã‹ãˆã‚‹ã«ã¯ã©ã†ã—ãŸã‚‰è‰¯ã„ã§ã™ã‹ï¼Ÿ

ã¯ã„ã€`List` ã‚’ **è‡ªç„¶é †ã®ã€Œé€†é †ï¼ˆé™é †ï¼‰ã€**ã§ä¸¦ã³æ›¿ãˆãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## âœ… æ–¹æ³•â‘ ï¼š`Collections.sort(list, Collections.reverseOrder())`

```java
import java.util.*;

public class ReverseSortExample {
    public static void main(String[] args) {
        List<Integer> numbers = Arrays.asList(5, 2, 9, 1, 3);

        Collections.sort(numbers, Collections.reverseOrder()); // é™é †ã«ã‚½ãƒ¼ãƒˆ

        System.out.println(numbers); // [9, 5, 3, 2, 1]
    }
}
```

- `Collections.reverseOrder()` ã¯ã€**è‡ªç„¶é †ã®é€†Comparator**ã‚’è¿”ã—ã¾ã™ã€‚
- `Collections.sort()` ã«æ¸¡ã™ã“ã¨ã§ã€**è‡ªç„¶é †ã®é€†ï¼é™é †**ã«ãªã‚Šã¾ã™ã€‚

---

## âœ… æ–¹æ³•â‘¡ï¼š`list.sort(Comparator.reverseOrder())`ï¼ˆJava 8 ä»¥é™ï¼‰

```java
numbers.sort(Comparator.reverseOrder());
```

- ã‚ˆã‚Šç°¡æ½”ã§ã€`Collections.sort()` ã‚ˆã‚Š**é–¢æ•°å‹ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã«é©ã—ãŸç¾ä»£çš„ãªæ›¸ãæ–¹**ã§ã™ã€‚
- çµæœã¯åŒã˜ãé™é †ã«ãªã‚Šã¾ã™ã€‚

---

## âœ… æ–¹æ³•â‘¢ï¼šè‡ªç„¶é †ã§ã‚½ãƒ¼ãƒˆå¾Œã« `Collections.reverse()`

```java
Collections.sort(numbers);         // è‡ªç„¶é †ï¼ˆæ˜‡é †ï¼‰
Collections.reverse(numbers);      // ãƒªã‚¹ãƒˆã®é †åºã‚’åè»¢
```

- 2æ®µéšã®æ“ä½œã«ãªã‚Šã¾ã™ãŒã€ç°¡å˜ãªã‚±ãƒ¼ã‚¹ã§ã¯å¯èª­æ€§ãŒé«˜ã„ã§ã™ã€‚
- ãŸã ã—ãƒªã‚¹ãƒˆå…¨ä½“ã‚’ä¸€åº¦ä¸¦ã³æ›¿ãˆã¦ã‹ã‚‰åè»¢ã™ã‚‹ãŸã‚ã€**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯è‹¥å¹²åŠ£ã‚‹**å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

---

## âœ… ã¾ã¨ã‚

| æ–¹æ³• | Javaãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç‰¹å¾´ |
| --- | --- | --- |
| `Collections.sort(list, Collections.reverseOrder())` | Java 1.2ã€œ | å¤å…¸çš„ãƒ»å®‰å®š |
| `list.sort(Comparator.reverseOrder())` | Java 8ã€œ | ç°¡æ½”ãƒ»é–¢æ•°å‹ã«å¯¾å¿œ |
| `Collections.sort() â†’ Collections.reverse()` | Java 1.2ã€œ | æ®µéšçš„ã«å‡¦ç†ãƒ»è¦–è¦šçš„ã«ã‚ã‹ã‚Šã‚„ã™ã„ |

# Q,

æ˜‡é †ã€é™é †ä»¥å¤–ã®ä¸¦ã¹æ›¿ãˆé †ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ

ã¯ã„ã€Hiroakiã•ã‚“ã€‚

Java ã§ã¯ **æ˜‡é †ãƒ»é™é †ä»¥å¤–ã«ã‚‚ã€ä»»æ„ã®ä¸¦ã¹æ›¿ãˆé †ï¼ˆã‚«ã‚¹ã‚¿ãƒ é †åºï¼‰** ã‚’è‡ªç”±ã«å®šç¾©ã§ãã¾ã™ã€‚

---

## âœ… ä¸¦ã¹æ›¿ãˆé †ã®ç¨®é¡ï¼ˆæ˜‡é †ãƒ»é™é †ä»¥å¤–ï¼‰

| ç¨®é¡ | å†…å®¹ä¾‹ |
| --- | --- |
| é•·ã•é † | æ–‡å­—åˆ—ã®é•·ã•ãŒçŸ­ã„é †ï¼é•·ã„é † |
| ç‰¹å®šã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰é † | `User.name` ã‚„ `Product.price` ãªã© |
| ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ï¼ˆå¤§æ–‡å­—ãƒ»å°æ–‡å­—ç„¡è¦–ï¼‰ | `compareToIgnoreCase` ã‚’ä½¿ã† |
| æ—¥ä»˜ã®æ–°ã—ã„é †ï¼å¤ã„é † | `LocalDate` ã®æ¯”è¼ƒ |
| ã‚«ã‚¹ã‚¿ãƒ å„ªå…ˆåº¦é † | ã€ŒVIP â†’ ä¸€èˆ¬ â†’ ã‚²ã‚¹ãƒˆã€ã®ã‚ˆã†ãªé †åº |
| null ã‚’æœ€å¾Œï¼æœ€åˆã« | `Comparator.nullsLast()` ãªã© |

---

## âœ… ä¾‹1ï¼šæ–‡å­—åˆ—ã®ã€Œé•·ã•é †ã€ã«ä¸¦ã³æ›¿ãˆ

```java
import java.util.*;

public class LengthSortExample {
    public static void main(String[] args) {
        List<String> words = Arrays.asList("cat", "elephant", "dog", "hippo");

        words.sort(Comparator.comparingInt(String::length));

        System.out.println(words); // [cat, dog, hippo, elephant]
    }
}
```

---

## âœ… ä¾‹2ï¼šã€Œå¤§æ–‡å­—å°æ–‡å­—ã‚’ç„¡è¦–ã€ã—ã¦è¾æ›¸é †

```java
words.sort(String::compareToIgnoreCase);
```

ã¾ãŸã¯ï¼š

```java
Collections.sort(words, String.CASE_INSENSITIVE_ORDER);
```

---

## âœ… ä¾‹3ï¼šã€Œnullã‚’æœ€å¾Œã«ã—ã¦ã‚½ãƒ¼ãƒˆã€

```java
List<String> list = Arrays.asList("Banana", null, "Apple", "Mango");

list.sort(Comparator.nullsLast(Comparator.naturalOrder()));
System.out.println(list); // [Apple, Banana, Mango, null]
```

---

## âœ… ä¾‹4ï¼šã€Œä»»æ„ã®å„ªå…ˆé †ä½ã€ã§ä¸¦ã¹ãŸã„

```java
List<String> roles = Arrays.asList("ä¸€èˆ¬", "ã‚²ã‚¹ãƒˆ", "VIP");

List<String> priority = Arrays.asList("VIP", "ä¸€èˆ¬", "ã‚²ã‚¹ãƒˆ");

roles.sort(Comparator.comparingInt(priority::indexOf));
System.out.println(roles); // [VIP, ä¸€èˆ¬, ã‚²ã‚¹ãƒˆ]
```

---

## âœ… è£œè¶³ï¼šComparator ãƒã‚§ãƒ¼ãƒ³ã§è¤‡æ•°æ¡ä»¶ã‚½ãƒ¼ãƒˆã‚‚å¯èƒ½

```java
list.sort(
    Comparator.comparing(User::getAge)
              .thenComparing(User::getName)
);
```

---

## âœ… ã¾ã¨ã‚

| ä¸¦ã³æ›¿ãˆ | ä½¿ç”¨æ–¹æ³•ã®ä¾‹ |
| --- | --- |
| æ˜‡é † | `Collections.sort(list)` |
| é™é † | `Collections.sort(list, Collections.reverseOrder())` |
| ã‚«ã‚¹ã‚¿ãƒ  | `list.sort(Comparator.comparing(...))` |

---

### å¿…è¦ã§ã‚ã‚Œã°ï¼š

- ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã®è¤‡é›‘ãªæ¯”è¼ƒï¼ˆå„ªå…ˆé †ä½ï¼‹nullå¯¾å¿œï¼‹å¤šæ¡ä»¶ï¼‰
- JDKæ¨™æº–ã® `Comparator` å®Ÿè£…ä¸€è¦§ï¼ˆ`comparingInt`, `thenComparing`, `nullsFirst`, etc.ï¼‰

ãªã©ã‚‚å¯¾å¿œã§ãã¾ã™ï¼ã•ã‚‰ã«æ·±æ˜ã‚Šã—ã¾ã™ã‹ï¼Ÿ

# Q,

ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã®è¤‡é›‘ãªæ¯”è¼ƒï¼ˆå„ªå…ˆé †ä½ï¼‹nullå¯¾å¿œï¼‹å¤šæ¡ä»¶ï¼‰ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚

ã¯ã„ã€Hiroakiã•ã‚“ã€‚

**ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã®è¤‡é›‘ãªæ¯”è¼ƒ**ï¼ˆå„ªå…ˆé †ä½ï¼‹nullå¯¾å¿œï¼‹å¤šæ¡ä»¶ï¼‰ã¯ã€å®Ÿå‹™ã§éå¸¸ã«ã‚ˆãä½¿ã‚ã‚Œã‚‹å ´é¢ã§ã™ã€‚

ã“ã“ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ¡ä»¶ã‚’ã™ã¹ã¦çµ±åˆã—ãŸæ¯”è¼ƒå‡¦ç†ã‚’æ§‹ç¯‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

---

## âœ… ç›®æ¨™ï¼šä»¥ä¸‹ã®è¤‡é›‘ãªæ¯”è¼ƒæ¡ä»¶ã§ `User` ã‚’ä¸¦ã³æ›¿ãˆã‚‹

| æ¡ä»¶ | å†…å®¹ |
| --- | --- |
| â‘  å„ªå…ˆåº¦é † | `"VIP" > "ä¸€èˆ¬" > "ã‚²ã‚¹ãƒˆ"` ã®é †ã§ |
| â‘¡ nullè¨±å®¹ | `role` ãŒ null ã®å ´åˆã¯æœ€å¾Œã«ã™ã‚‹ |
| â‘¢ åå‰é † | åå‰ï¼ˆ`name`ï¼‰ã‚’è¾æ›¸é †ï¼ˆæ˜‡é †ï¼‰ã§ |

---

## âœ… Step 1: `User` ã‚¯ãƒ©ã‚¹å®šç¾©

```java
public class User {
    private String name;
    private String role; // "VIP", "ä¸€èˆ¬", "ã‚²ã‚¹ãƒˆ", nullã‚‚ã‚ã‚Šã†ã‚‹

    public User(String name, String role) {
        this.name = name;
        this.role = role;
    }

    public String getName() {
        return name;
    }

    public String getRole() {
        return role;
    }

    @Override
    public String toString() {
        return name + "(" + role + ")";
    }
}
```

---

## âœ… Step 2: ã‚«ã‚¹ã‚¿ãƒ  Comparator ã®å®šç¾©ã¨ä½¿ç”¨

```java
import java.util.*;

public class CustomSortExample {
    public static void main(String[] args) {
        List<User> users = Arrays.asList(
            new User("Tanaka", "ä¸€èˆ¬"),
            new User("Yamada", null),
            new User("Suzuki", "VIP"),
            new User("Sato", "ã‚²ã‚¹ãƒˆ"),
            new User("Abe", "VIP"),
            new User("Inoue", null)
        );

        // å„ªå…ˆé †ä½ã®å®šç¾©
        List<String> priority = Arrays.asList("VIP", "ä¸€èˆ¬", "ã‚²ã‚¹ãƒˆ");

        // Comparatorå®šç¾©ï¼šroleå„ªå…ˆé †ä½ â†’ nullå¾Œã‚ â†’ nameæ˜‡é †
        users.sort(
            Comparator
                .comparing(User::getRole,
                    Comparator.nullsLast(Comparator.comparingInt(role -> priority.indexOf(role)))
                )
                .thenComparing(User::getName) // åå‰é †
        );

        // çµæœå‡ºåŠ›
        users.forEach(System.out::println);
    }
}
```

---

## âœ… å®Ÿè¡Œçµæœï¼ˆæƒ³å®šï¼‰

```java
Abe(VIP)
Suzuki(VIP)
Tanaka(ä¸€èˆ¬)
Sato(ã‚²ã‚¹ãƒˆ)
Inoue(null)
Yamada(null)
```

---

## âœ… è§£èª¬

| æ¡ä»¶ | Comparatorã®ä½¿ã„æ–¹ |
| --- | --- |
| å„ªå…ˆé †ä½ | `priority.indexOf(role)` ã‚’ä½¿ã£ã¦é †åºã‚’æ•°å€¤åŒ– |
| nullå¯¾å¿œ | `Comparator.nullsLast(...)` ã§ null ã¯å¾Œã‚ã« |
| å¤šæ¡ä»¶ | `thenComparing(...)` ã§ç¬¬äºŒæ¡ä»¶ï¼ˆåå‰ï¼‰ |

---

## âœ… å¿œç”¨ãƒã‚¤ãƒ³ãƒˆ

- `nullsFirst()` ã«å¤‰ãˆã‚‹ã¨ null ã‚’å…ˆé ­ã«ã§ãã‚‹
- `reversed()` ã‚’é€”ä¸­ã§æŒŸã‚€ã¨é™é †ã«ã§ãã‚‹
- `thenComparing()` ã‚’è¤‡æ•°é€£çµã™ã‚Œã°3æ¡ä»¶ãƒ»4æ¡ä»¶ã‚‚OK

---

## âœ… ã¾ã¨ã‚

| è¦ç´  | ä½¿ç”¨æ–¹æ³•ä¾‹ |
| --- | --- |
| å„ªå…ˆé †ä½ä»˜ãæ¯”è¼ƒ | `priority.indexOf(obj.getKey())` ã§æ•°å€¤å¤‰æ›ã—ã¦æ¯”è¼ƒ |
| nullå¯¾å¿œ | `Comparator.nullsLast()` ã¾ãŸã¯ `nullsFirst()` |
| è¤‡æ•°æ¡ä»¶ | `thenComparing()` ã‚’é€£ç¶šä½¿ç”¨ |

# Q,

ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã‚’è‡ªç„¶é †ã§ä¸¦ã³æ›¿ãˆã‚‹ã«ã¯ã©ã†ã™ã‚‹ã‹ï¼Ÿï¼ˆComparableå®Ÿè£…ï¼‰ã‚’ãŠé¡˜ã„ã—ã¾ã™

ã¯ã„ã€Hiroakiã•ã‚“ã€‚

**ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã‚’è‡ªç„¶é †ï¼ˆnatural orderï¼‰ã§ä¸¦ã³æ›¿ãˆã‚‹ã«ã¯ `Comparable<T>` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹**å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## âœ… çµè«–ï¼š`Comparable<T>` ã‚’å®Ÿè£…ã—ã€`compareTo()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹

ã“ã‚Œã«ã‚ˆã‚Šã€ãã®ã‚¯ãƒ©ã‚¹ã¯ `Collections.sort()` ã‚„ `TreeSet` ãªã©ã§è‡ªå‹•çš„ã« **è‡ªç„¶é †ã§ä¸¦ã³æ›¿ãˆå¯èƒ½**ã«ãªã‚Šã¾ã™ã€‚

---

## âœ… ä¾‹ï¼š`User` ã‚¯ãƒ©ã‚¹ã‚’åå‰ã®æ˜‡é †ï¼ˆè¾æ›¸é †ï¼‰ã§è‡ªç„¶é †ã«ä¸¦ã³æ›¿ãˆ

### ğŸ”¹ Step 1: `User` ã‚¯ãƒ©ã‚¹ã®å®šç¾©ï¼ˆComparableå®Ÿè£…ï¼‰

```java
public class User implements Comparable<User> {
    private String name;
    private int age;

    public User(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() { return name; }
    public int getAge() { return age; }

    // è‡ªç„¶é †ã®å®šç¾©ï¼ˆåå‰ã®æ˜‡é †ï¼‰
    @Override
    public int compareTo(User other) {
        return this.name.compareTo(other.name); // æ–‡å­—åˆ—ã®è¾æ›¸é †
    }

    @Override
    public String toString() {
        return name + "(" + age + ")";
    }
}
```

---

### ğŸ”¹ Step 2: ä¸¦ã³æ›¿ãˆã®ä½¿ç”¨ä¾‹

```java
import java.util.*;

public class Main {
    public static void main(String[] args) {
        List<User> users = Arrays.asList(
            new User("Tanaka", 30),
            new User("Abe", 25),
            new User("Sato", 28)
        );

        Collections.sort(users); // Comparableã®compareTo()ã§å®šç¾©ã—ãŸè‡ªç„¶é †ã«ä¸¦ã³æ›¿ãˆ

        users.forEach(System.out::println);
    }
}
```

---

### âœ… å®Ÿè¡Œçµæœ

```java
Abe(25)
Sato(28)
Tanaka(30)
```

---

## âœ… ãƒã‚¤ãƒ³ãƒˆæ•´ç†

| é …ç›® | å†…å®¹ |
| --- | --- |
| æ¯”è¼ƒæ–¹æ³• | `this.compareTo(other)` ã§å®šç¾© |
| æˆ»ã‚Šå€¤ | æ­£ï¼šthisãŒå¾Œã€è² ï¼šthisãŒå‰ã€0ï¼šç­‰ä¾¡ |
| `String` ã‚„ `Integer` ã® compareTo ã‚’åˆ©ç”¨å¯èƒ½ |  |
| è‡ªç„¶é † | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç‹¬è‡ªã®ã€ŒåŸºæœ¬ã‚½ãƒ¼ãƒˆé †ã€ |

---

## âœ… å¿œç”¨ï¼šè¤‡æ•°æ¡ä»¶ã®è‡ªç„¶é †ï¼ˆåå‰â†’å¹´é½¢ï¼‰

```java
@Override
public int compareTo(User other) {
    int result = this.name.compareTo(other.name);
    if (result == 0) {
        return Integer.compare(this.age, other.age);
    }
    return result;
}
```

---

## âœ… Comparable ã¨ Comparator ã®ä½¿ã„åˆ†ã‘

| ç‰¹å¾´ | Comparable | Comparator |
| --- | --- | --- |
| å®Ÿè£…å ´æ‰€ | æ¯”è¼ƒã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¹è‡ªèº«ã«å®šç¾© | å¤–éƒ¨ã‚¯ãƒ©ã‚¹ã¾ãŸã¯ãƒ©ãƒ ãƒ€ã§å®šç¾© |
| ãƒ¡ã‚½ãƒƒãƒ‰ | `int compareTo(T o)` | `int compare(T o1, T o2)` |
| ä½¿ãˆã‚‹å ´é¢ | `Collections.sort(list)` ãªã© | è¤‡æ•°ã‚½ãƒ¼ãƒˆåŸºæº–ãŒå¿…è¦ã€ã¾ãŸã¯å¤‰æ›´ã—ãŸã„æ™‚ |
| è¤‡æ•°åŸºæº– or æŸ”è»Ÿæ€§ | âŒï¼ˆ1ã¤ã ã‘ï¼‰ | âœ…ï¼ˆè¤‡æ•°æ¯”è¼ƒæ¡ä»¶ãƒ»é€†é †ãƒ»nullå¯¾å¿œãªã©ï¼‰ |

---

## âœ… ã¾ã¨ã‚

- **è‡ªç„¶é †ã§ä¸¦ã³æ›¿ãˆã‚‹ã«ã¯ `Comparable<T>` ã‚’å®Ÿè£…ã™ã‚‹**
- `compareTo()` ãƒ¡ã‚½ãƒƒãƒ‰ã§ã€Œè‡ªç„¶é †ã€ã®æ„å‘³ã‚’å®šç¾©
- æ¨™æº–APIã® sort ç³»ã¯ `compareTo()` ã‚’è‡ªå‹•ã§ä½¿ã†

---

å¿…è¦ã§ã‚ã‚Œã°ã€æ¬¡ã®ã‚ˆã†ãªå†…å®¹ã«ã‚‚ç™ºå±•ã§ãã¾ã™ï¼š

- `TreeSet` ã‚„ `TreeMap` ã«è‡ªç„¶é †ã§æ ¼ç´
- recordå‹ã§ã® Comparable å®Ÿè£…
- equals/hashCode/compareTo ã®æ•´åˆæ€§

ã”å¸Œæœ›ãŒã‚ã‚Œã°ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

# Q,

TreeSet ã‚„ TreeMap ã«è‡ªç„¶é †ã§æ ¼ç´ã™ã‚‹å ´åˆã¯ã€åŸºæœ¬ç‰¹ã«ãªã«ã‚‚ã—ãªãã¦ã‚‚æ ¼ç´ã™ã‚‹ã ã‘ã§è‡ªç„¶é †ä½ãªã‚‹èªè­˜ã§ã™ãŒã‚ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ
Listã‹ã‚‰TreeSetã¸å¤‰æ›ã™ã‚‹å ´åˆã«ã€compareToã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ãŒå¿…è¦ã«ãªã‚‹ã‚ˆã†ãªè¨˜è¼‰ãŒã‚ã£ãŸã‚ˆã†ãªæ°—ãŒã—ã¾ã™ãŒã©ã†ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã¯ã„ã€Hiroakiã•ã‚“ã€‚

éå¸¸ã«é‹­ã„ãƒã‚¤ãƒ³ãƒˆã«ç€ç›®ã•ã‚Œã¦ã„ã¾ã™ã€‚ãã®èªè­˜ã¯ **åŠåˆ†æ­£è§£ã§ã€åŠåˆ†æ³¨æ„ãŒå¿…è¦**ã§ã™ã€‚ä»¥ä¸‹ã§ä¸å¯§ã«æ•´ç†ã—ã¾ã™ã€‚

---

## âœ… çµè«–ï¼ˆå‰æï¼‰

- `TreeSet` ã‚„ `TreeMap` ã¯ **è¦ç´ ã®é †åºã‚’è‡ªå‹•ã§ç®¡ç†**ã—ã¾ã™ï¼ˆï¼è‡ªç„¶é †ã‚„æŒ‡å®šé †ï¼‰ã€‚
- ãã®é †åºã‚’åˆ¤æ–­ã™ã‚‹ãŸã‚ã«ã¯ã€**è¦ç´ ã«é †åºæ€§ãŒã‚ã‚‹ã“ã¨ï¼ˆï¼æ¯”è¼ƒå¯èƒ½ã§ã‚ã‚‹ã“ã¨ï¼‰**ãŒå¿…è¦ã§ã™ã€‚

---

## âœ… â‘  TreeSet / TreeMap ã«è‡ªç„¶é †ã§æ ¼ç´ã§ãã‚‹æ¡ä»¶

| ãƒ‡ãƒ¼ã‚¿å‹ | æ¡ä»¶ |
| --- | --- |
| `String`, `Integer` ãªã© | ã‚‚ã¨ã‚‚ã¨ `Comparable` ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ â†’ ãã®ã¾ã¾æ ¼ç´å¯ |
| **ç‹¬è‡ªã‚¯ãƒ©ã‚¹** | `Comparable<T>` ã‚’å®Ÿè£…ã—ã€`compareTo()` ã‚’å®šç¾©ã—ã¦ãŠãå¿…è¦ã‚ã‚Š |

```java
TreeSet<User> set = new TreeSet<>();
```

â†’ `User` ã‚¯ãƒ©ã‚¹ã« `compareTo()` ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹å‰æã§ã™ã€‚

---

### âœ… æ–¹æ³•â‘¡: `Comparator` ã‚’TreeSetã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã«æ¸¡ã™

```java
TreeSet<User> set = new TreeSet<>(Comparator.comparing(User::getName));
```

â†’ ã‚¯ãƒ©ã‚¹å´ã§ `Comparable` ã‚’å®Ÿè£…ã—ã¦ã„ãªãã¦ã‚‚OKã€‚æŸ”è»Ÿã§ã™ã€‚

---

## âœ… â‘¡ List â†’ TreeSet ã®å¤‰æ›æ™‚ã®æ³¨æ„

```java
List<User> list = ...;
Set<User> set = new TreeSet<>(list); // â† ã“ã“ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å¯èƒ½æ€§ã‚ã‚Šï¼
```

ã“ã®å ´åˆã€**ãƒªã‚¹ãƒˆå†…ã®è¦ç´ ã«é †åºæ€§ï¼ˆComparable or Comparatorï¼‰ãŒãªã„ã¨ `ClassCastException` ãŒç™ºç”Ÿ**ã—ã¾ã™ã€‚

### â— ä¾‹å¤–ä¾‹

```java
Exception in thread "main" java.lang.ClassCastException:
User cannot be cast to java.lang.Comparable
```

---

## âœ… è£œè¶³ï¼šMapã‚‚åŒã˜ãƒ«ãƒ¼ãƒ«ï¼ˆã‚­ãƒ¼ã«å¯¾ã—ã¦ï¼‰

- `TreeMap<K, V>` ã®å ´åˆã¯ã€**ã‚­ãƒ¼ K ãŒ Comparable ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹å¿…è¦ã‚ã‚Š**ã€‚
- å€¤ V ã¯é †åºã«ã¯é–¢ä¿‚ã—ãªã„ã®ã§ã€æ¯”è¼ƒå¯èƒ½ã§ãªãã¦ã‚‚OKã€‚

---

## âœ… ã¾ã¨ã‚

| ã‚±ãƒ¼ã‚¹ | æ¡ä»¶ã‚„å¯¾å¿œ |
| --- | --- |
| `TreeSet<æ–‡å­—åˆ—>` | OKï¼ˆStringã¯Comparableï¼‰ |
| `TreeSet<ç‹¬è‡ªã‚¯ãƒ©ã‚¹>` | `Comparable` å®Ÿè£… or `Comparator` æŒ‡å®šãŒå¿…è¦ |
| `List â†’ TreeSet` å¤‰æ› | è¦ç´ ãŒæ¯”è¼ƒå¯èƒ½ã§ãªã„ã¨ `ClassCastException` ç™ºç”Ÿ |
| `TreeMap<K, V>` | `K` ã« `Comparable` å®Ÿè£… or `Comparator` æŒ‡å®šå¿…é ˆ |

---

### ã”ææ¡ˆ

å¿…è¦ã§ã‚ã‚Œã°ã€ä»¥ä¸‹ã‚‚åˆã‚ã›ã¦ã”ç´¹ä»‹ã§ãã¾ã™ï¼š

- `TreeSet` ã§é‡è¤‡ã¨é †åºã®é–¢ä¿‚ï¼ˆequals/hashCodeã¨ã®é•ã„ï¼‰
- `TreeMap` ã‚’ç”¨ã„ãŸè¤‡æ•°ãƒ‡ãƒ¼ã‚¿ã®ã‚­ãƒ¼ã‚½ãƒ¼ãƒˆæ´»ç”¨ä¾‹
- `Comparator` ã¨ `Comparable` ã®ä¸¡æ–¹ã‚’ä½¿ã£ãŸé«˜åº¦ãªå®Ÿè£…

# Q,

â‘¡ List â†’ TreeSet ã®å¤‰æ›æ™‚ã®æ³¨æ„
ã“ã®å ´åˆã€ãƒªã‚¹ãƒˆå†…ã®è¦ç´ ã«é †åºæ€§ï¼ˆComparable or Comparatorï¼‰ãŒãªã„ã¨ ClassCastException ãŒç™ºç”Ÿã—ã¾ã™ã€‚

ä¸Šè¨˜ã®è¨˜è¿°ã¯ã€ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã®è¦ç´ ãŒã€Objectå‹ã®ã‚ˆã†ã«ã€ã„ã‚ã„ã‚ãªæ–¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ ¼ç´ã™ã‚‹ã‚ˆã†ãªã‚±ãƒ¼ã‚¹ã§ã¯ãã‚‚ãã‚‚é †åºæ€§ãŒãªã„(Comparableç­‰ã‚’å®Ÿè£…ã—ã¦ã‚‚æ„å‘³ãŒãªã„)ã‹ã‚‰ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ã¨ã„ã†èªè­˜ã¯åˆã£ã¦ã„ã¾ã™ã‹ï¼Ÿ

ã¯ã„ã€Hiroakiã•ã‚“ã€‚

ãã®èªè­˜ã¯ **ã‹ãªã‚Šæ­£ç¢º**ã§ã™ãŒã€ã•ã‚‰ã«å³å¯†ã«ã—ã¦ãŠãã¨ç†è§£ãŒã‚ˆã‚Šæ·±ã¾ã‚Šã¾ã™ã€‚

---

## âœ… è¦ç‚¹çµè«–

- `TreeSet` ã«æ ¼ç´ã™ã‚‹ã«ã¯ã€Œé †åºã‚’åˆ¤å®šã§ãã‚‹å¿…è¦ã€ãŒã‚ã‚Šã¾ã™ã€‚
- ãã®ãŸã‚ã€**è¦ç´ ãŒ `Comparable` ã‚’å®Ÿè£…ã—ã¦ã„ãªã„ã¨ `ClassCastException` ãŒç™ºç”Ÿ**ã—ã¾ã™ã€‚
- `Objectå‹` ã®ã‚ˆã†ã«ã€Œä½•ã§ã‚‚å…¥ã‚Œã‚‰ã‚Œã‚‹ãŒã€é †åºãŒå®šç¾©ã•ã‚Œã¦ã„ãªã„ã€å‹ã¯ã€ãã®ã¾ã¾ã§ã¯ **é †åºæ€§ã‚’åˆ¤æ–­ã§ããšä¾‹å¤–ãŒå‡ºã‚‹**ã€ã¨ã„ã†ç†è§£ã¯æ­£ã—ã„ã§ã™ã€‚

---

## âœ… è©³ã—ãèª¬æ˜ã™ã‚‹ã¨ï¼š

### âŒ ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã¯ä¾‹å¤–ã‚’å¼•ãèµ·ã“ã—ã¾ã™ï¼š

```java
List<Object> list = new ArrayList<>();
list.add("apple");
list.add(123);  // String ã¨ Integer ã®æ··åœ¨

Set<Object> set = new TreeSet<>(list); // ClassCastException!
```

### â— ãªãœï¼Ÿ

- `"apple"`ï¼ˆ`String`ï¼‰ã¨ `123`ï¼ˆ`Integer`ï¼‰ã® **å‹ãŒç•°ãªã‚‹**
- ã‹ã¤ã€**å…±é€šã®æ¯”è¼ƒæ–¹æ³•ï¼ˆcompareTo, compareï¼‰ã‚’æŒã£ã¦ã„ãªã„**
- `TreeSet` ã¯ã€**ã€Œé †åºä»˜ãã§é‡è¤‡ãªã—ã€**ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã«ã€å†…éƒ¨ã§ compareTo ã¾ãŸã¯ compare ã‚’å‘¼ã³ã¾ã™ã€‚
- ã“ã®ã¨ã **ç•°ãªã‚‹å‹åŒå£«ã ã¨æ¯”è¼ƒä¸å¯èƒ½ã§ä¾‹å¤–ãŒç™ºç”Ÿ**ã—ã¾ã™ã€‚

---

## âœ… ã‚ˆã‚Šå®‰å…¨ãªè¨­è¨ˆã¨ã¯ï¼Ÿ

### âœ” 1. åŒä¸€ã®æ¯”è¼ƒå¯èƒ½å‹ã ã‘ã‚’æ ¼ç´ã™ã‚‹ï¼š

```java
List<String> list = List.of("banana", "apple", "cherry");
Set<String> set = new TreeSet<>(list); // OKï¼ˆStringã¯Comparableã‚’å®Ÿè£…ï¼‰
```

### âœ” 2. ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã« `Comparable` ã‚’å®Ÿè£…ã™ã‚‹ï¼š

```java
class User implements Comparable<User> {
    private String name;
    public User(String name) { this.name = name; }

    @Override
    public int compareTo(User other) {
        return this.name.compareTo(other.name);
    }
}
```

### âœ” 3. ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ `Comparator` ã‚’æ˜ç¤ºã™ã‚‹ï¼š

```java
Set<Object> set = new TreeSet<>((a, b) -> a.toString().compareTo(b.toString()));
```

---

## âœ… ã¾ã¨ã‚

| ç‰¹æ€§ | çµæœ |
| --- | --- |
| è¦ç´ ãŒ `Comparable` ã§ãªã„ | `TreeSet` ã§ã®æ¯”è¼ƒæ™‚ã«ä¾‹å¤–ãŒç™ºç”Ÿã™ã‚‹ |
| `Object`å‹ã®ã‚ˆã†ãªæ±ç”¨å‹ | ãã‚‚ãã‚‚é †åºå®šç¾©ãŒãªã„ã®ã§ä¾‹å¤–ãƒªã‚¹ã‚¯å¤§ |
| å‹æ··åœ¨ï¼ˆä¾‹ï¼šString + Integerï¼‰ | ç•°ãªã‚‹ compareTo å®Ÿè£… â†’ æ¯”è¼ƒä¸å¯ã§ä¾‹å¤– |
| å¯¾ç­– | `Comparable` å®Ÿè£… or `Comparator` æŒ‡å®š |

# Q,

å¯¾ç­–	Comparable å®Ÿè£… or Comparator æŒ‡å®š

å¯¾ç­–ã¨ã—ã¦ Comparable å®Ÿè£… or Comparator æŒ‡å®šã—ãŸã¨ã—ã¦ã‚‚ã€å‹ãŒåˆã‚ãªã„ã¨æ¯”è¼ƒã¯ã§ããªã„ãŒã€ä¾‹å¤–ã§ã¯ãªãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ®µéšã§ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã—ã¦ãã‚Œã‚‹ãªã©ã®æ„å‘³ã§å¯¾ç­–ã«ãªã‚‹ã¨ã„ã†ã“ã¨ã§ã—ã‚‡ã†ã‹ï¼Ÿ

éå¸¸ã«è‰¯ã„è¦–ç‚¹ã§ã™ã€Hiroakiã•ã‚“ã€‚

çµè«–ã‹ã‚‰è¨€ã†ã¨ï¼š

---

## âœ… å¯¾ç­–ã¨ã—ã¦ `Comparable` å®Ÿè£… or `Comparator` æŒ‡å®šã—ã¦ã‚‚

### â†’ **å‹ãŒä¸€è‡´ã—ã¦ã„ãªã‘ã‚Œã°**ã€**æ¯”è¼ƒãã®ã‚‚ã®ãŒæˆç«‹ã—ãªã„ï¼ˆï¼å®Ÿè¡Œæ™‚ä¾‹å¤–ï¼‰**ã§ã™ã€‚

### â†’ **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã‚¨ãƒ©ãƒ¼ã§ã¯ãªãã€å®Ÿè¡Œæ™‚ä¾‹å¤–ï¼ˆ`ClassCastException`ï¼‰ã«ãªã‚Šã¾ã™ã€‚**

---

## ğŸ”· ãªãœã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„ã®ã‹ï¼Ÿ

Javaã¯ã€Œã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®å‹æ¶ˆå»ï¼ˆtype erasureï¼‰ã€ã«ã‚ˆã‚Šã€**å®Ÿè¡Œæ™‚ã«å‹æƒ…å ±ãŒä¸å®Œå…¨ã«ãªã‚‹**ãŸã‚ã€

ãŸã¨ãˆ `TreeSet<User>` ã‚’å®£è¨€ã—ã¦ã„ã¦ã‚‚ã€å†…éƒ¨çš„ã«ã¯ `Object` ã¨ã—ã¦å‡¦ç†ã™ã‚‹ç®‡æ‰€ãŒã‚ã‚Šã¾ã™ã€‚

ã—ãŸãŒã£ã¦ï¼š

- `TreeSet` ã®å†…éƒ¨ã§ `compareTo()` ã‚„ `compare()` ã‚’å‘¼ã³å‡ºã™ã¾ã§ã¯ã€å‹ã®ä¸ä¸€è‡´ã«æ°—ä»˜ã‘ã¾ã›ã‚“ã€‚
- å®Ÿè¡Œæ™‚ã«æ¯”è¼ƒã§ããªã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¥ãŸã¨ãã«ã€**`ClassCastException`** ã‚’ã‚¹ãƒ­ãƒ¼ã—ã¾ã™ã€‚

---

## âœ… å¯¾ç­–ãŒæ„å‘³ã‚’æŒã¤å ´é¢ï¼ˆæ•´ç†ï¼‰

| å¯¾ç­– | æ„å‘³ãƒ»ç›®çš„ |
| --- | --- |
| `Comparable<T>` ã‚’å®Ÿè£… | â†’ **å‹ãŒ T ã«é™å®šã•ã‚Œã‚‹ã®ã§è¨­è¨ˆãƒŸã‚¹ã‚’æ¸›ã‚‰ã›ã‚‹**ï¼ˆTä»¥å¤–ã®æ¯”è¼ƒã¯ãã‚‚ãã‚‚ã§ããªã„è¨­è¨ˆã«ãªã‚‹ï¼‰ |
| `Comparator<T>` ã‚’æŒ‡å®š | â†’ **æ±ç”¨çš„ãªæ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯ã‚’æŸ”è»Ÿã«å®šç¾©ã§ãã‚‹**ï¼ˆnullå¯¾å¿œãƒ»å¤šæ¡ä»¶ãƒ»é †åºã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãªã©ï¼‰ |
| `TreeSet<T>` ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | â†’ **ç•°ãªã‚‹å‹ã‚’æ··ãœãŸå ´åˆã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã§ãã‚‹**ï¼ˆãŸã ã— unchecked cast ã®ä¾‹å¤–ã¯å¯èƒ½ï¼‰ |

---

## âœ… ä¾‹ï¼šComparator ã‚’æŒ‡å®šã—ã¦ã‚‚å‹ä¸ä¸€è‡´ã§ä¾‹å¤–ã«ãªã‚‹ã‚±ãƒ¼ã‚¹

```java
Set<Object> set = new TreeSet<>(Comparator.comparing(Object::toString));
set.add("apple");
set.add(123); // å®Ÿè¡Œã¯ã§ãã‚‹ãŒ toString ã®æ¯”è¼ƒã§å•é¡ŒãŒå‡ºã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚‹
```

ã“ã‚Œã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯é€šã‚Šã¾ã™ãŒã€**å®Ÿè¡Œæ™‚ã« `toString()` ãŒ null ã‚’è¿”ã™ãªã©ã§å¤±æ•—ã™ã‚‹å¯èƒ½æ€§**ã‚‚ã‚ã‚Šã¾ã™ã€‚

---

## âœ… å¯¾ç­–ã‚’ã€Œå®‰å…¨ã«ã€æ„å‘³ã‚ã‚‹ã‚‚ã®ã«ã™ã‚‹ã«ã¯ï¼Ÿ

### âœ” å‹ã‚’ã—ã£ã‹ã‚Šé™å®šã™ã‚‹ï¼ˆã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’æ­£ã—ãä½¿ã†ï¼‰

```java
TreeSet<User> set = new TreeSet<>(); // User must implement Comparable<User>
```

ã“ã®ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ï¼š

- `set.add(new Product())` ãªã©å‹é•ã„ã¯**ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼**ã«ãªã‚Šã¾ã™ã€‚
- å®‰å…¨ã« `compareTo()` ã‚„ `Comparator` ã‚’æ´»ç”¨ã§ãã¾ã™ã€‚

---

## âœ… è£œè¶³ï¼šComparator ã§ã‚‚å‹ã‚’å¼·åˆ¶ã§ãã‚‹

```java
Comparator<User> comparator = Comparator.comparing(User::getName);
TreeSet<User> set = new TreeSet<>(comparator); // OK
```

ã“ã®å½¢ã§ã‚ã‚Œã°ã€ä»–ã®å‹ã‚’æ··ãœã‚ˆã†ã¨ã™ã‚‹ã¨**å‹ä¸ä¸€è‡´ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼**ã«ãªã‚Šã¾ã™ã€‚

---

## âœ… ã¾ã¨ã‚

| çŠ¶æ³ | çµæœ |
| --- | --- |
| Comparable å®Ÿè£…ãªã— | TreeSetã§ `ClassCastException` |
| å‹æ··åœ¨ã§æ ¼ç´ | ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯é€šã‚‹ãŒå®Ÿè¡Œæ™‚ä¾‹å¤– |
| ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã§å‹é™å®š | **å‹ã®å®‰å…¨æ€§ãŒæ‹…ä¿ã•ã‚Œã‚‹ï¼ˆâ—ï¼‰** |
| Comparatorã§å‹æŒ‡å®šã—ãŸæ§‹æ–‡ | **å®‰å…¨ï¼ˆç•°å‹ã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ï¼‰** |

# Q,

ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã ã¨ã—ã¦ã‚‚ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æŒ‡å®šã™ã‚‹å‹ã‚’Objectå‹ã«ã™ã‚‹ã“ã¨ã¯é¿ã‘ã‚‰ã‚Œã€ã‚ˆã‚Šçµ±ä¸€çš„ãªå‹ãŒé¸æŠã•ã‚Œã‚‹ã“ã¨ã‹ã‚‰ã€compareToã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ã“ã¨ãŒå¯¾ç­–ã«ãªã‚‹ã¨ã„ã†ç†è§£ã®æ–¹å‘æ€§ã¯åˆã£ã¦ã„ã¾ã™ã‹ï¼Ÿ

ã¯ã„ã€Hiroakiã•ã‚“ã€‚

ãã®ç†è§£ã®æ–¹å‘æ€§ã¯**éå¸¸ã«è‰¯ã„ç€çœ¼ç‚¹ã§ã€æ¦‚ã­æ­£ç¢º**ã§ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«æ•´ç†ã§ãã¾ã™ã€‚

---

## âœ… çµè«–

- **ç‹¬è‡ªã‚¯ãƒ©ã‚¹ã§ `compareTo` ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ã“ã¨ãŒå¯¾ç­–ã«ãªã‚‹**ã¨ã„ã†ç†è§£ã¯æ­£ã—ã„ã§ã™ã€‚
- ç‰¹ã«ã€Œãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ `Object` å‹ã®ã‚ˆã†ãªæ±ç”¨å‹ã«ã—ãªã„ã€ã“ã¨ã§ã€**æ¯”è¼ƒã®å¯¾è±¡ã‚’æ˜ç¢ºã«ã—ã€è¨­è¨ˆã‚’å®‰å…¨ã«ä¿ã¤**ã“ã¨ãŒã§ãã¾ã™ã€‚

---

## âœ… èƒŒæ™¯ã«ã‚ã‚‹è¨­è¨ˆæ€æƒ³

### âŒ Objectå‹ã«ã™ã‚‹ã¨ä½•ãŒå•é¡Œã‹ï¼Ÿ

- `Object` å‹ã¯ã€Œä½•ã§ã‚‚å…¥ã‚‹ã€åé¢ã€**ä½•ã‚‚ä¿è¨¼ã•ã‚Œãªã„**ã€‚
- `compareTo(Object o)` ã®ã‚ˆã†ãªå®šç¾©ã«ã™ã‚‹ã¨ã€å†…éƒ¨ã§ã‚­ãƒ£ã‚¹ãƒˆã—ãªã„ã¨æ¯”è¼ƒã§ããšã€**å‹ã®å®‰å…¨æ€§ãŒå´©ã‚Œã‚‹**ã€‚
- ãã®ãŸã‚ `Comparable<T>` ã® `T` ã‚’å…·ä½“çš„ãªå‹ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€**æ¯”è¼ƒå¯èƒ½ãªè¨­è¨ˆãŒæ˜ç¤ºã•ã‚Œã‚‹**ã€‚

---

## âœ… å…·ä½“ä¾‹

### âŒ è‰¯ããªã„ä¾‹ï¼ˆObjectå‹ã‚’ä½¿ã£ãŸæ›–æ˜§ãªæ¯”è¼ƒï¼‰

```java
public class Data {
    private Object value;

    // å‹ãŒä¸æ˜ãªã®ã§æ¯”è¼ƒä¸èƒ½ï¼ˆor ã‚­ãƒ£ã‚¹ãƒˆå¿…é ˆï¼‰
}
```

â†’ `TreeSet<Data>` ã«æ ¼ç´ã™ã‚‹ã«ã¯ `Comparable<Data>` ãŒå¿…è¦ã ãŒã€value ã®æ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯ãŒæ›–æ˜§

---

### âœ… è‰¯ã„ä¾‹ï¼ˆå‹ã‚’æ˜ç¤ºã—ã€compareToã§è‡ªç„¶é †ã‚’å®šç¾©ï¼‰

```java
public class Score implements Comparable<Score> {
    private int value;

    public Score(int value) {
        this.value = value;
    }

    @Override
    public int compareTo(Score other) {
        return Integer.compare(this.value, other.value);
    }
}
```

â†’ `TreeSet<Score>` ã«å•é¡Œãªãæ ¼ç´å¯èƒ½ï¼ˆè‡ªç„¶é † = ç‚¹æ•°ã®æ˜‡é †ï¼‰

---

## âœ… ã¾ã¨ã‚ã‚‹ã¨

| è¦³ç‚¹ | è§£èª¬ |
| --- | --- |
| `Object` å‹ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚„å¼•æ•° | æŸ”è»Ÿã ãŒæ¯”è¼ƒã§ããšã€å®‰å…¨ã§ãªã„ |
| `Comparable<T>` ã‚’ä½¿ã† | å‹å®‰å…¨ã§é †åºã®å®šç¾©ãŒæ˜ç¢º |
| compareTo ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ | TreeSet ãªã©é †åºæ§‹é€ ã«å¿…é ˆ |
| å‹ã‚’å…·ä½“çš„ã«å®šç¾©ã™ã‚‹ãƒ¡ãƒªãƒƒãƒˆ | ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã§ä¸æ•´åˆã‚’é˜²ã’ã‚‹ |

---

## âœ… è£œè¶³ã‚¢ãƒ‰ãƒã‚¤ã‚¹

> ã€ŒcompareTo ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒå‹è¨­è¨ˆã®å®‰å…¨æ€§ã«ã¤ãªãŒã‚‹ã€ã¨ã„ã†è€ƒãˆæ–¹ã¯ã€Javaã®å‹è¨­è¨ˆã¨æ•´åˆæ€§ã®è¦³ç‚¹ã‹ã‚‰éå¸¸ã«æ­£ã—ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ã€‚
> 

ã‚‚ã—ã”èˆˆå‘³ãŒã‚ã‚Œã°ã€æ¬¡ã®ã‚ˆã†ãªå¿œç”¨ã‚‚ã”ç´¹ä»‹ã§ãã¾ã™ï¼š

- equals / hashCode / compareTo ã®æ•´åˆæ€§ã¨è¡çªæ™‚ã®ãƒã‚°ä¾‹
- Comparator ã‚’ä½µç”¨ã—ãŸã€Œä¸€æ™‚çš„ãªåˆ¥é †åºã€ã®æ‰±ã„
- recordå‹ã§ã®è‡ªç„¶é †å®šç¾©ï¼ˆJava 14+ï¼‰