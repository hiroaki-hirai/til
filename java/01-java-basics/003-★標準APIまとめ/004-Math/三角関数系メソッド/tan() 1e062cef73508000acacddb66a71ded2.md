# tan()

`Math.tan()` は Java において、**与えられたラジアン角度のタンジェント（tan、正接）を求めるメソッド**です。

三角関数の中でも **周期的に無限大へ発散する特性を持つ**ため、試験でも**π/2 や 3π/2 付近での挙動の理解**がよく問われます。

---

## ✅ `Math.tan()` の基本情報

| 項目 | 内容 |
| --- | --- |
| クラス | `java.lang.Math`（インポート不要） |
| メソッド名 | `tan()` |
| 用途 | **ラジアンで与えた角度のタンジェント（tan）を返す** |
| 戻り値の型 | `double` |

---

## 🔹 シグネチャ（定義）

```java
public static double tan(double a)
```

- `a`：角度（**ラジアン単位**）
- 戻り値：`tan(a)` の値（`double` 型）

---

## 🔹 使用例（基本）

```java
System.out.println(Math.tan(0));               // → 0.0
System.out.println(Math.tan(Math.PI / 4));     // → 約1.0（45度）
System.out.println(Math.tan(Math.PI));         // → 約0.0（180度）
System.out.println(Math.tan(3 * Math.PI / 4)); // → 約 -1.0（135度）
```

---

## 🔸 ラジアン単位の重要性

```java
System.out.println(Math.tan(45)); // → tan(45ラジアン) ≒ 1.619
```

✅ `tan(45)` を期待してそのまま渡すと **45ラジアン**として解釈され、想定外の結果になります。

✅ 正しくは：

```java
System.out.println(Math.tan(Math.toRadians(45))); // → 約1.0
```

---

## 🔹 主要な角度と `tan` の値（度 → ラジアン）

| 角度（度） | ラジアン | `tan` の値 |
| --- | --- | --- |
| 0° | `0` | `0.0` |
| 45° | `π/4` | `1.0` |
| 90° | `π/2` | 定義されない（→ 無限大に発散） |
| 180° | `π` | `0.0` |
| 270° | `3π/2` | 定義されない（→ 無限大に発散） |

---

## 🔸 注意：`tan(π/2)` は無限大！

```java
System.out.println(Math.tan(Math.PI / 2)); // → 約1.633...E16（非常に大きな数）
```

✅ Java ではエラーにならず、**非常に大きな値**（浮動小数点の限界）を返します。

これは **tan が定義できない点（垂直漸近）** に近いため、**発散的に増加**します。

---

## 🔹 特殊値の挙動

| 入力 | 出力 | 備考 |
| --- | --- | --- |
| `0.0` | `0.0` | tan(0) = 0 |
| `Math.PI / 4` | ≒ `1.0` | tan(45°) |
| `Math.PI / 2` | ≫ `10^16`（発散） | tan(90°) 近傍で発散 |
| `Double.POSITIVE_INFINITY` | `NaN` | 無限大のtanは未定義 |
| `Double.NaN` | `NaN` | NaNを渡すとNaNが返る |

---

## 🔸 `Math.tan()` vs `Math.atan()`

| メソッド | 内容 | 戻り値 |
| --- | --- | --- |
| `Math.tan(x)` | x（ラジアン）の tan を求める | `double`（範囲無制限） |
| `Math.atan(x)` | x の arctangent（逆正接）を返す | `double`（-π/2～π/2） |

---

## ✅ よくある誤解と注意点

| 誤解内容 | 正しい理解 |
| --- | --- |
| `Math.tan(90)` は 1.0？ | ❌ 90ラジアンのtan → 意図外の結果（度でなくラジアン） |
| `Math.tan()` は常に有限な値？ | ❌ π/2などでは非常に大きな値（発散）が返る |
| `tan()` の戻り値は -1～1 の範囲？ | ❌ 範囲制限なし（-∞ ～ ∞） |
| `tan()` に整数や度を渡してもOK？ | ❌ ラジアンで指定すべき（`Math.toRadians()` を使う） |

---

## ✅ 実務での用途

- グラフィックス処理（角度から傾きの算出）
- ベクトルの角度判定・回転処理
- 物理シミュレーション（傾斜角、力の分解）
- GUI コンポーネントの傾きや変形

---

## 🔺 `Math.tan()` 引っかけ問題集（全5問）

---

### ❓ 問題 1：`Math.tan(45)` の出力は？

```java
System.out.println(Math.tan(45));
```

A. `1.0`

B. `NaN`

C. `0.999...`

D. `1.619...`

**答え**：D. `1.619...`

**解説**：

`45` は **45ラジアン** として解釈されます（非常に大きい角度）。

→ `tan(45)` を期待するなら、ラジアンに変換が必要：

```java
Math.tan(Math.toRadians(45)); // → 約 1.0
```

---

### ❓ 問題 2：戻り値の型

```java
var result = Math.tan(Math.PI / 4);
System.out.println(((Object)result).getClass().getSimpleName());
```

A. `Float`

B. `Double`

C. `Integer`

D. `Long`

**答え**：B. `Double`

**解説**：

`Math.tan()` の戻り値は常に **`double` 型**。

小数で表される値（例えば 1.0 や 0.0）も、型は `double` です。

---

### ❓ 問題 3：`Math.tan(Math.PI / 2)` の出力は？

```java
System.out.println(Math.tan(Math.PI / 2));
```

A. `0.0`

B. `1.0`

C. `Infinity`

D. 非常に大きな数（例：1.633...E16）

**答え**：D. 非常に大きな数（例：1.633...E16）

**解説**：

`tan(π/2)` は数学的に定義されず、**無限大に発散**します。

Java ではエラーにならず、**浮動小数点の極大値近く**が返されます。

---

### ❓ 問題 4：負の角度の扱い

```java
System.out.println(Math.tan(-Math.PI / 4));
```

A. `-1.0`

B. `1.0`

C. `0.0`

D. `NaN`

**答え**：A. `-1.0`

**解説**：

`tan(-x) = -tan(x)` なので、**tanは奇関数**です。

→ `tan(-π/4) = -1.0`

---

### ❓ 問題 5：特殊値の扱い（NaN）

```java
System.out.println(Math.tan(Double.NaN));
```

A. `0.0`

B. `NaN`

C. `Infinity`

D. コンパイルエラー

**答え**：B. `NaN`

**解説**：

Javaの `Math` 系メソッドでは、**`NaN` を渡すと `NaN` が返る**のが標準動作です。

---

## ✅ よくある誤解まとめ

| 誤解内容 | 実際の仕様 |
| --- | --- |
| `tan(45)` は `1.0`？ | ❌ 45ラジアンのtan。正しくは `Math.toRadians(45)` に変換 |
| `tan()` の戻り値は常に -1.0～1.0？ | ❌ tanは無制限。π/2などで発散（無限大に近づく） |
| `tan()` に度数を渡しても期待通り？ | ❌ `toRadians()` で変換しないと正しい値にならない |
| `tan()` に `NaN` を渡すと例外？ | ❌ 例外は出ず、結果も `NaN` |