# cbrt()

`Math.cbrt()` は Java において、**立方根（3乗根、キューブルート）を求めるメソッド**です。

つまり「x の 1/3 乗（∛x）」を計算します。

`Math.sqrt()` が平方根なのに対し、`Math.cbrt()` は「3乗して元の値になる数」を求めるものです。

---

## ✅ `Math.cbrt()` の基本情報

| 項目 | 内容 |
| --- | --- |
| クラス | `java.lang.Math`（インポート不要） |
| メソッド名 | `cbrt()` |
| 用途 | **立方根（3乗根）を求める** |
| 戻り値の型 | `double` |
| 引数の型 | `double` |

---

## 🔹 シグネチャ（定義）

```java
public static double cbrt(double a)
```

- `a`：立方根を求めたい数
- 戻り値：**a の立方根（∛a）** を `double` 型で返す

---

## 🔹 使用例

```java
System.out.println(Math.cbrt(8));     // → 2.0（2³ = 8）
System.out.println(Math.cbrt(27));    // → 3.0（3³ = 27）
System.out.println(Math.cbrt(-125));  // → -5.0（-5³ = -125）
System.out.println(Math.cbrt(2));     // → 約 1.26（∛2）
```

---

## 🔸 特徴と注意点

| 観点 | 内容 |
| --- | --- |
| 戻り値の型 | `double` |
| 負の数も扱える | ✅ `cbrt(-27)` → `-3.0`（実数で定義される） |
| 精度 | 浮動小数点なので厳密な整数になるとは限らない（誤差に注意） |
| オーバーフロー | 入力が極端に大きい場合でも `double` の範囲内で処理される |

---

## 🔹 `Math.cbrt()` vs `Math.pow(x, 1.0/3)`

| 比較項目 | `Math.cbrt(x)` | `Math.pow(x, 1.0/3)` |
| --- | --- | --- |
| 定義 | 3乗根専用メソッド | 任意のべき乗（分数の指数もOK） |
| 精度・安全性 | ◎ 精度高く、負数にも対応 | △ 精度が劣り、負数で `NaN` になることも |
| 負の入力への対応 | OK（正確に `-∛x` を返す） | ❌ `Math.pow(-8, 1.0/3)` → `NaN` |
| 実務での推奨 | ✅ 安全・正確な計算ができて安定 | △ 負数には不安定で注意が必要 |

---

## 🔹 特殊値の挙動

| 入力値 | 結果 | 備考 |
| --- | --- | --- |
| `0.0` | `0.0` | OK |
| `-0.0` | `-0.0` | 負の 0 も区別される |
| `-27.0` | `-3.0` | 正常（負数でも可） |
| `Double.POSITIVE_INFINITY` | `Infinity` | 無限大の立方根は無限大 |
| `Double.NEGATIVE_INFINITY` | `-Infinity` | 負の無限大も対応 |
| `NaN` | `NaN` | Not-a-Number のまま返る |

---

## ✅ よくある誤解と注意点

| 誤解内容 | 正しい理解 |
| --- | --- |
| `cbrt()` は負の値を扱えない？ | ❌ OK。`Math.sqrt()` とは異なり、負数も対応 |
| `Math.pow(x, 1.0/3)` と同じ？ | ❌ 精度や負数対応に違いあり |
| `cbrt(0)` は `NaN`？ | ❌ 正常に `0.0` を返す |
| `cbrt()` の戻り値は常に整数？ | ❌ 浮動小数点（近似値） |

---

## ✅ 実務での用途（例）

- 体積から一辺の長さを求める（立方体）
- ニュートン法などの数値計算
- データ変換（キューブルートスケーリング）

---

## 🔺 `Math.cbrt()` 引っかけ問題集（全5問）

---

### ❓ 問題 1：`Math.cbrt(27)` の結果は？

```java
System.out.println(Math.cbrt(27));
```

A. `9.0`

B. `3.0`

C. `1.5`

D. `NaN`

**答え**：B. `3.0`

**解説**：

`3³ = 27` → 立方根は `3.0`。

`Math.cbrt()` は **3乗根（∛x）** を返します。

---

### ❓ 問題 2：負の値の立方根

```java
System.out.println(Math.cbrt(-8));
```

A. `NaN`

B. `8.0`

C. `-2.0`

D. `例外が発生する`

**答え**：C. `-2.0`

**解説**：

- `2³ = -8` なので `∛(-8)` は `2.0`

👉 `Math.sqrt()` は負数で `NaN` を返しますが、`Math.cbrt()` は **負数OK！**

---

### ❓ 問題 3：`Math.pow()` と `Math.cbrt()` の違い

```java
System.out.println(Math.pow(-8, 1.0 / 3));
```

A. `-2.0`

B. `2.0`

C. `NaN`

D. コンパイルエラー

**答え**：C. `NaN`

**解説**：

`Math.pow(-8, 1.0 / 3)` → 負数に対する分数乗は `NaN` になることがある（実数では未定義扱い）

→ 代わりに `Math.cbrt(-8)` を使えば正しく `-2.0` が返る

---

### ❓ 問題 4：戻り値の型

```java
var result = Math.cbrt(125);
System.out.println(((Object)result).getClass().getSimpleName());
```

A. `Integer`

B. `Double`

C. `Float`

D. `Long`

**答え**：B. `Double`

**解説**：

`Math.cbrt()` の戻り値は **常に `double` 型**。

たとえ見た目が整数でも `3.0` のように返されます。

---

### ❓ 問題 5：小数の立方根

```java
System.out.println(Math.cbrt(2));
```

最も近い出力に当てはまるものは？

A. `1.414`

B. `1.26`

C. `2.0`

D. `NaN`

**答え**：B. `1.26`

**解説**：

∛2 ≒ 1.26。`Math.cbrt()` は浮動小数点の**近似値**を返します。

平方根の値と混同しないように注意！（Aは√2）

---

## ✅ よくある誤解ポイントまとめ

| 誤解内容 | 正しい理解 |
| --- | --- |
| `Math.cbrt()` は `sqrt()` の別名？ | ❌ `sqrt()` は平方根、`cbrt()` は立方根 |
| `Math.cbrt(-x)` は `NaN`？ | ❌ `cbrt()` は負の数でも正確に処理できる |
| `Math.pow(x, 1.0/3)` と同じ？ | ❌ 負の値には `NaN` を返すので用途が異なる |
| `Math.cbrt(2)` は正確な値を返す？ | ❌ 近似値（例：1.259921...）が `double` で返る |