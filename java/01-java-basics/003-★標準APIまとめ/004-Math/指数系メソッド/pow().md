# pow()

Math.pow() は、**べき乗（指数計算）を行うためのJava標準メソッド**です。

例えば、「2の3乗（2×2×2＝8）」のような計算に使います。

---

## ✅ `Math.pow()` の基本情報

| 項目 | 内容 |
| --- | --- |
| クラス | `java.lang.Math`（インポート不要） |
| メソッド名 | `pow()` |
| 用途 | **べき乗（累乗）**を求める |
| 修飾子 | `public static` |
| 戻り値の型 | `double` |

---

## 🔹 シグネチャ（定義）

```java
public static double pow(double a, double b)
```

- `a`：底（base）
- `b`：指数（exponent）
- 計算：**a の b 乗（a^b）**

---

## 🔹 使用例

```java
System.out.println(Math.pow(2, 3));     // → 8.0 （2の3乗）
System.out.println(Math.pow(9, 0.5));   // → 3.0 （9の平方根）
System.out.println(Math.pow(5, -2));    // → 0.04（1 / (5^2)）
```

---

## 🔸 特徴と注意点

| 観点 | 内容 |
| --- | --- |
| 戻り値は `double` | 整数を渡しても戻り値は常に `double`（例：2^3 → 8.0） |
| 指数に小数もOK | 小数の指数（√や立方根など）も計算できる |
| 負の指数もOK | `a^-b` → `1 / a^b` のように逆数を返す |
| 精度誤差あり | 浮動小数点演算なので、完全な整数が返るとは限らない（特に小数乗） |

---

## 🔹 特殊なケース

| 式 | 結果 | 説明 |
| --- | --- | --- |
| `Math.pow(0, 0)` | `1.0` | 定義上、Javaでは 1.0 |
| `Math.pow(0, 1)` | `0.0` | 0 の何乗は 0 |
| `Math.pow(2, Double.NaN)` | `NaN` | NaN を含むと NaN |
| `Math.pow(-2, 0.5)` | `NaN` | 実数で定義できない（負の平方根） |

---

## 🔹 他のMath関数との関連

| メソッド | 用途 | 例 |
| --- | --- | --- |
| `Math.sqrt(x)` | 平方根（= `x^0.5`） | `Math.sqrt(9)` → `3.0` |
| `Math.cbrt(x)` | 立方根（= `x^(1/3)`） | `Math.cbrt(8)` → `2.0` |
| `Math.exp(x)` | `e^x`（ネイピア数のべき乗） | `Math.exp(1)` → `2.718...` |

---

## ✅ よくある誤解と注意点

| 誤解・間違い | 実際は… |
| --- | --- |
| `Math.pow()` の戻り値は int？ | ❌ 常に `double` |
| `Math.pow(0, 0)` はエラーになる？ | ❌ Javaでは `1.0` |
| `Math.pow(-4, 0.5)` は `2.0`？ | ❌ `NaN`（負の平方根は実数では未定義） |
| 精度が完全に正確な整数を返す？ | ❌ 演算結果は `double` なので誤差がありうる |

---

## ✍️ 使用上のアドバイス

- **整数のべき乗**なら `int` にキャストして使ってもOKですが、**精度誤差に注意**。
- **ルート計算や指数関数**も `pow()` を使えば汎用的に扱えます。
- パフォーマンスや精度を求める場合は、`BigInteger` や `StrictMath.pow()` の使用も検討。

---

## 🔺 `Math.pow()` 引っかけ問題集（全5問）

---

### ❓ 問題1：戻り値の型は？

```java
var result = Math.pow(2, 3);
System.out.println(((Object)result).getClass().getSimpleName());
```

A. `Integer`

B. `Long`

C. `Double`

D. `BigDecimal`

**答え**：C. `Double`

**解説**：

`Math.pow()` の戻り値は常に `double` 型です。

たとえ `2^3 = 8` のように整数になる結果でも、`8.0`（`Double`）として返されます。

---

### ❓ 問題2：負の指数

```java
System.out.println(Math.pow(10, -2));
```

A. `-100.0`

B. `0.01`

C. `100.0`

D. コンパイルエラー

**答え**：B. `0.01`

**解説**：

`10^-2 = 1 / (10^2) = 1 / 100 = 0.01`

**負の指数は「逆数」**として扱われます。

---

### ❓ 問題3：ゼロのゼロ乗

```java
System.out.println(Math.pow(0, 0));
```

A. コンパイルエラー

B. 例外が発生する

C. `0.0`

D. `1.0`

**答え**：D. `1.0`

**解説**：

数学的には未定義とされることが多い `0^0` ですが、**Javaでは 1.0 を返す**仕様になっています（IEEE 754準拠）。

---

### ❓ 問題4：負の数の平方根

```java
System.out.println(Math.pow(-4, 0.5));
```

A. `2.0`

B. `-2.0`

C. `NaN`

D. コンパイルエラー

**答え**：C. `NaN`

**解説**：

- `4^0.5` は「-4の平方根」→ 実数では定義できません。

`Math.pow()` は `double` を返しますが、**定義できない場合は NaN を返す**仕様です。

---

### ❓ 問題5：誤差の罠

```java
System.out.println(Math.pow(0.1, 2) == 0.01);
```

A. `true`

B. `false`

C. コンパイルエラー

D. 例外が発生する

**答え**：B. `false`

**解説**：

浮動小数点の演算では、**0.1 × 0.1 = 0.010000000000000002** のように**誤差が生じる**場合があります。

→ `== 0.01` という比較は `false`。

✅ このような比較は **誤差許容範囲（イプシロン）を使って比較するのが正解**です。

---

## ✅ よくある誤解まとめ

| 誤解内容 | 実際は… |
| --- | --- |
| `Math.pow(2, 3)` の戻り値は `int`？ | ❌ `double`（→ 8.0） |
| `Math.pow(0, 0)` はエラーになる？ | ❌ Javaでは `1.0` を返す |
| `pow(-4, 0.5)` は `2.0`？ | ❌ `NaN`（実数範囲で定義できない） |
| 小数の乗算は正確に計算できる？ | ❌ 誤差あり（例：0.1 × 0.1 ≠ 0.01） |