# rint()

`Math.rint()` は、Javaにおける**丸め系メソッドの中でも少し特殊な動作**をするメソッドです。

**「偶数への丸め」というルールを持っており、他のメソッド（`round`, `floor`, `ceil`）とは挙動が異なります。
Java SilverやGoldではこの違いを問う引っかけ問題**が出ることもあります。

---

## ✅ `Math.rint()` の基本情報

| 項目 | 内容 |
| --- | --- |
| クラス | `java.lang.Math`（インポート不要） |
| メソッド名 | `rint()` |
| 用途 | 最も近い**整数値（double型）**に丸めて返す |
| 特徴 | **ちょうど中間の値（.5）では偶数方向に丸める**（銀行丸め） |
| 戻り値の型 | `double`（※ `int`や`long`ではない） |

---

## 🔹 メソッド定義

```java
public static double rint(double a)
```

---

## 🔹 基本動作（四捨五入＋偶数優先）

| 入力 | 出力 | 説明 |
| --- | --- | --- |
| `2.3` | `2.0` | 四捨五入で `2` |
| `2.5` | `2.0` | **中間値なので偶数 `2.0` に丸める** |
| `3.5` | `4.0` | 中間値なので偶数 `4.0` に丸める |
| `-2.5` | `-2.0` | 中間値なので偶数 `-2.0` に丸める |
| `-3.5` | `-4.0` | 中間値なので偶数 `-4.0` に丸める |

---

## 🔹 他の丸め系メソッドとの違い

| メソッド | 丸め方法 | 例：2.5 → | 例：-2.5 → |
| --- | --- | --- | --- |
| `Math.round()` | 四捨五入（0.5以上切り上げ） | `3` | `-2` |
| `Math.floor()` | 小さい方向に切り捨て | `2.0` | `-3.0` |
| `Math.ceil()` | 大きい方向に切り上げ | `3.0` | `-2.0` |
| `Math.rint()` | 最近接の整数（同点は偶数） | `2.0` | `-2.0` |

---

## 🔹 使用例

```java
public class Main {
    public static void main(String[] args) {
        System.out.println(Math.rint(2.5));   // → 2.0
        System.out.println(Math.rint(3.5));   // → 4.0
        System.out.println(Math.rint(-2.5));  // → -2.0
        System.out.println(Math.rint(7.1));   // → 7.0
    }
}
```

---

## 🔸 特殊値の扱い

| 入力 | 出力 |
| --- | --- |
| `NaN` | `NaN` |
| `+Infinity` | `+Infinity` |
| `-Infinity` | `-Infinity` |

---

## ✅ よくある誤解・注意点

| 誤解内容 | 正しい理解 |
| --- | --- |
| `rint()` は `round()` と同じ？ | ❌ `rint()` は中間値を**偶数へ**、`round()` は常に切り上げ |
| `rint()` の戻り値は int？ | ❌ `double` 型 |
| `rint(2.5)` は `3.0`？ | ❌ `2.0`（偶数優先で中間点処理） |
| `rint()` の「最も近い整数」は切り捨て？ | ❌ 四捨五入＋同点は偶数方向 |

---

## 📌 用途（どんなときに使う？）

- 金融・統計処理などで、**計算誤差が累積しないようにする丸め**（偶数丸め＝バイアスを避ける）
- IEEE 754 浮動小数点仕様に基づいた丸めが必要なケース

---

## 🔺 Math.rint() 引っかけ問題集（全5問）

---

### ❓ 問題 1：中間値の偶数丸め

```java
System.out.println(Math.rint(2.5));
```

A. `3.0`

B. `2.0`

C. `2`

D. コンパイルエラー

**答え**：B. `2.0`

**解説**：

`Math.rint(2.5)` は、**中間値（0.5）なので偶数に丸められる** → `2.0`

`Math.round()` であれば `3` になるため、**この違いがよく出題されます**。

---

### ❓ 問題 2：負の中間値

```java
System.out.println(Math.rint(-3.5));
```

A. `-3.0`

B. `-4.0`

C. `-4`

D. `-3`

**答え**：B. `-4.0`

**解説**：

中間値（-3.5）は、**最も近い偶数 -4.0 に丸められます**。

負の数でも「偶数への丸め」が適用されます。

---

### ❓ 問題 3：戻り値の型に注意

```java
var x = Math.rint(7.1);
System.out.println(((Object)x).getClass().getSimpleName());
```

A. `Integer`

B. `Double`

C. `Long`

D. `Float`

**答え**：B. `Double`

**解説**：

`Math.rint()` の戻り値は常に `double`。

たとえ見た目が整数でも、**戻り値の型は `int` ではない**ので注意！

---

### ❓ 問題 4：他の丸めメソッドとの違い

```java
System.out.println(Math.rint(1.5));
System.out.println(Math.round(1.5));
```

正しい出力の組み合わせは？

A. `2.0` と `2`

B. `2.0` と `1`

C. `1.0` と `2`

D. `1.0` と `1`

**答え**：A. `2.0` と `2`

**解説**：

- `rint(1.5)` は偶数 `2.0` に丸める
- `round(1.5)` は四捨五入で `2`
    
    → このケースでは**たまたま結果が一致**しますが、**仕組みは異なります**
    

---

### ❓ 問題 5：intへの代入

```java
int result = Math.rint(4.6);
System.out.println(result);
```

A. `5`

B. `4`

C. コンパイルエラー

D. 実行時エラー

**答え**：C. コンパイルエラー

**解説**：

`Math.rint()` は `double` を返すので、`int` に代入するには**明示的キャスト**が必要です。

```java
int result = (int)Math.rint(4.6); // これならOK（→ 5）
```

---

## ✅ よくある誤解まとめ

| 誤解内容 | 実際は… |
| --- | --- |
| `Math.rint()` は普通の四捨五入？ | ❌ **0.5のときは偶数に丸める（銀行丸め）** |
| 戻り値は `int` や `long`？ | ❌ 常に `double` 型 |
| `rint(2.5)` は `3.0`？ | ❌ `2.0`（偶数方向） |
| `rint()` と `round()` は同じ？ | ❌ 振る舞いが異なる（特に中間値で差が出る） |