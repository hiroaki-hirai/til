# ceil()

---

## ✅ `Math.ceil()` の基本情報

| 項目 | 内容 |
| --- | --- |
| クラス | `java.lang.Math`（インポート不要） |
| メソッド名 | `ceil()` |
| 用途 | 数値を「大きい方向」に切り上げた値を返す |
| 修飾子 | `public static`（staticメソッド） |
| 戻り値の型 | `double` |

---

## 🔹 シグネチャ（定義）

```java
public static double ceil(double a)
```

---

## 🔹 動作の特徴（切り上げ）

| 式 | 結果 | 説明 |
| --- | --- | --- |
| `Math.ceil(3.1)` | `4.0` | 小数点以下がある → 切り上げ |
| `Math.ceil(3.9)` | `4.0` |  |
| `Math.ceil(3.0)` | `3.0` | すでに整数 → そのまま |
| `Math.ceil(-3.1)` | `-3.0` | 負の値 → 0に近い方へ切り上げ |
| `Math.ceil(-3.9)` | `-3.0` |  |

---

## 🔹 `Math.floor()` との違い

| メソッド | 動作 | 例（3.7） | 例（-3.7） |
| --- | --- | --- | --- |
| `Math.ceil()` | **大きい方向に切り上げ** | `4.0` | `-3.0` |
| `Math.floor()` | **小さい方向に切り捨て** | `3.0` | `-4.0` |

---

## 🔸 負の数の扱いが特に重要！

- `ceil(-3.7)` → -`3.0`（**0に近づく方向へ切り上げ**）
- `floor(-3.7)` → -`4.0`（**遠ざかる方向へ切り捨て**）
    
    → 負の値では、**ceil の方が値が大きくなる**
    

---

## 🔹 特殊値の扱い

| 入力 | 出力 |
| --- | --- |
| `NaN` | `NaN` |
| `+Infinity` | `+Infinity` |
| `-Infinity` | `-Infinity` |

---

## 🔹 使用例

```java
public class Main {
    public static void main(String[] args) {
        System.out.println(Math.ceil(5.1));   // → 6.0
        System.out.println(Math.ceil(-2.3));  // → -2.0
        System.out.println(Math.ceil(4.0));   // → 4.0
    }
}
```

---

## 🔹 他の丸めメソッドとの比較表

| メソッド | 丸め方 | 例（2.5） | 例（-2.5） |
| --- | --- | --- | --- |
| `Math.ceil()` | 大きい方向（正の無限大方向） | `3.0` | `-2.0` |
| `Math.floor()` | 小さい方向（負の無限大方向） | `2.0` | `-3.0` |
| `Math.round()` | 四捨五入 | `3` | `-2` |
| `Math.rint()` | 最も近い整数、同点は偶数へ | `2.0` | `-2.0` |

---

## 🔸 よくある誤解

| 誤解内容 | 正しい理解 |
| --- | --- |
| `ceil()` は「0方向への切り上げ」？ | → ❌ 常に**大きい方向（+∞）**への切り上げ |
| `ceil()` の戻り値は `int`？ | → ❌ 常に `double` 型です |
| `ceil(-3.9)` は `-4.0`？ | → ❌ `-3.0`（0に近づく方） |

---

## 🔺 Math.ceil() 引っかけ問題集（全5問）

---

### ❓ 問題1：負の数の切り上げ

```java
System.out.println(Math.ceil(-2.3));
```

A. `-3.0`

B. `-2.0`

C. `2.0`

D. コンパイルエラー

**答え**：B. `-2.0`

**解説**：

`Math.ceil()` は「**大きい方向（正の無限大方向）**」へ切り上げる。

→ `-2.3` の **大きい方向**は `-2.0`（0に近づく方向）

→ 負の数の場合、**ceilは値が小さくなるのではなく、むしろ大きくなる**ことに注意！

---

### ❓ 問題2：戻り値の型

```java
var result = Math.ceil(7.1);
System.out.println(((Object)result).getClass().getSimpleName());
```

A. `Integer`

B. `Double`

C. `Float`

D. `Long`

**答え**：B. `Double`

**解説**：

`Math.ceil(double)` は `double` を返す。

→ `var` は `double` 型として推論 → ボクシングされて `Double`。

---

### ❓ 問題3：整数の扱い

```java
System.out.println(Math.ceil(5.0));
```

A. `5.0`

B. `5`

C. コンパイルエラー

D. `5.00`

**答え**：A. `5.0`

**解説**：

`Math.ceil()` は常に `double` 型を返す。

整数であっても戻り値の型は `double`。

→ 表示上は `5.0` になります。

---

### ❓ 問題4：キャストなしの代入

```java
int i = Math.ceil(4.8);
System.out.println(i);
```

A. `4`

B. `5`

C. コンパイルエラー

D. 実行時エラー

**答え**：C. コンパイルエラー

**解説**：

`Math.ceil()` の戻り値は `double`。

`double` を `int` に代入するには明示的キャストが必要。

```java
int i = (int)Math.ceil(4.8); // OK
```

---

### ❓ 問題5：floorとの混同

```java
System.out.println(Math.floor(-3.3));  // ?
System.out.println(Math.ceil(-3.3));   // ?
```

正しい出力は？

A. `-3.0` と `-4.0`

B. `-4.0` と `-3.0`

C. `-3.3` と `-3.3`

D. コンパイルエラー

**答え**：B. `-4.0` と `-3.0`

**解説**：

- `floor(-3.3)` → **小さい方向** → `4.0`
- `ceil(-3.3)` → **大きい方向（0に近い）** → `3.0`

---

## ✅ よくある誤解まとめ

| 誤解 | 実際は… |
| --- | --- |
| `ceil(-2.3)` は `-3.0` になる？ | ❌ `-2.0`（大きい方向＝0に近づく） |
| `ceil()` の戻り値は `int`？ | ❌ `double` 型 |
| 整数を ceil() すると `int` が返る？ | ❌ 戻り値は常に `double`（例：5.0） |
| `ceil()` は「ゼロ方向への切り上げ」？ | ❌ 常に「正の無限大方向」への切り上げ |