# matches()

---

# ✅ `String.matches()` の基本情報

| 項目 | 内容 |
| --- | --- |
| 所属クラス | `java.lang.String`（インポート不要） |
| メソッド名 | `matches(String regex)` |
| 戻り値の型 | `boolean`（マッチすればtrue、しなければfalse） |
| 主な用途 | **文字列全体が指定した正規表現にマッチするか判定する** |

---

# 🔹 シグネチャ（定義）

```java
public boolean matches(String regex)

```

- **regex**：比較するための正規表現パターン
- **戻り値**：
    - **true**：文字列全体がパターンに一致する場合
    - **false**：一致しない場合

---

# 🔹 使用例（基本）

```java
String s = "12345";

boolean result = s.matches("[0-9]+");
System.out.println(result);  
// → true（0～9の数字が1文字以上続く文字列）
```

✅ **文字列全体が正規表現に一致しているかをチェック**します！

---

# 🔹 重要ポイント（特に試験・実務で混同しやすい）

| 項目 | 内容 |
| --- | --- |
| **部分一致ではない！** | 🔥 文字列**全体**が正規表現にマッチするかを見る（部分一致ではない） |
| 先頭だけ一致してもfalseになるか？ | ✅ なる（先頭だけ合ってもダメ。全文が対象） |
| 正規表現の特殊文字に注意 | ✅ メタ文字（`.`, `*`, `+`, `?`, `[]`, `()` など）に注意 |
| null対象に使えるか？ | ❌ thisがnullならNPE（NullPointerException）発生 |

---

# 🔹 よく使う正規表現パターン例

| 用途 | 正規表現 | 説明 |
| --- | --- | --- |
| 数字だけ | `[0-9]+` | 1文字以上の数字 |
| 英小文字だけ | `[a-z]+` | 1文字以上の小文字 |
| 英大文字だけ | `[A-Z]+` | 1文字以上の大文字 |
| 英数字混在OK | `[A-Za-z0-9]+` | 1文字以上の英数字 |
| メールアドレス簡易版 | `.+@.+\\..+` | "@"と"."を含む簡単なメール形式 |
| 空文字以外 | `.+` | 1文字以上（何でもよい） |

---

# 🔹 部分一致したい場合は？

✅ matches()は「全文一致」なので、

**部分一致したいなら** → `Pattern` + `Matcher` を使う！

例：

```java
Pattern p = Pattern.compile("abc");
Matcher m = p.matcher("123abc456");
boolean found = m.find(); // 部分一致チェック
```

---

# ✅ まとめ

| 項目 | 内容 |
| --- | --- |
| チェック対象 | 文字列全体が正規表現にマッチするか |
| 部分一致できる？ | ❌ できない（全文マッチのみ） |
| null安全か？ | ❌ 呼び出し元がnullだと例外発生 |
| 典型的な使い方 | フォーマット検証（電話番号、郵便番号、ユーザーID、メールアドレスなど） |

---

# ✨ 超シンプルまとめ

> matches()は文字列"全体"が正規表現に一致するかを判定する！
部分一致じゃないので注意！
nullには注意！
> 

✅ この感覚を押さえておけば、試験でも実務でもバッチリ使えます！

以下に、**「matches()専用 引っかけ問題集（部分一致トリック・正規表現トラップ対応・全8問）」** をご用意しました！

今回は、

**「全文一致か？」「部分一致と勘違いしていないか？」「正規表現の解釈ミスを防げるか？」**

を徹底的に鍛えます！

---

# 🔺 `matches()`専用 引っかけ問題集（全8問）

---

## 【問題編】

---

### ❓ 問題 1：単純な数字判定

```java
String s = "12345";
System.out.println(s.matches("[0-9]+"));
```

### ✅ 問題 1の答え

**答え**：A. true

**解説**：

- "12345"は数字だけで構成されている！

---

### ❓ 問題 2：先頭が合っていても？

```java
String s = "123abc";
System.out.println(s.matches("[0-9]+"));
```

### ✅ 問題 2の答え

**答え**：B. false

**解説**：

- 先頭は数字でも**全文一致ではない**のでfalse！

---

### ❓ 問題 3：部分一致できるか？

```java
String s = "abc123def";
System.out.println(s.matches("[0-9]+"));
```

### ✅ 問題 3の答え

**答え**：B. false

**解説**：

- 数字だけじゃない → "abc"や"def"が入ってるのでダメ！

---

### ❓ 問題 4：空文字列に対するmatches()

```java
String s = "";
System.out.println(s.matches(".+"));
```

### ✅ 問題 4の答え

**答え**：B. false

**解説**：

- `. +`は「1文字以上」という意味 → 空文字はマッチしない！

---

### ❓ 問題 5：ピリオド（`.`）の意味

```java
String s = "a";
System.out.println(s.matches("."));
```

### ✅ 問題 5の答え

**答え**：A. true

**解説**：

- `.`は「任意の1文字」とマッチするので、1文字"a"にはマッチ！

---

### ❓ 問題 6：ピリオドのエスケープ

```java
String s = "a.b";
System.out.println(s.matches("a\\.b"));

```

### ✅ 問題 6の答え

**答え**：A. true

**解説**：

- `\\.`はリテラルのピリオド。
- `"a.b"`に正しくマッチする！

---

### ❓ 問題 7：メールアドレス形式の簡易判定

```java
String s = "user@example.com";
System.out.println(s.matches(".+@.+\\..+"));
```

### ✅ 問題 7の答え

**答え**：A. true

**解説**：

- `. +@. +\\. .+` は「文字あり」＋「@」＋「ドット」＋「文字あり」という簡易メールパターン。

---

### ❓ 問題 8：英小文字だけか判定

```java
String s = "apple123";
System.out.println(s.matches("[a-z]+"));
```

### ✅ 問題 8の答え

**答え**：B. false

**解説**：

- "apple123"には数字が入ってるので、英小文字だけのパターンに合わない！

---

# ✅ matches()引っかけ注意ポイントまとめ

| 罠ポイント | 正しい理解 |
| --- | --- |
| 部分一致ではない | 🔥 文字列**全体**が正規表現にマッチするかを見る |
| 空文字にmatches(".+")は？ | ❌ マッチしない（1文字以上必要） |
| ピリオド（.）の意味 | ✅ 任意の1文字（ただしリテラルピリオドは\でエスケープする必要あり） |
| メール判定の簡易正規表現 | ✅ ".+@.+\..+"のような形が最低限必要 |
| null対象の場合 | ❌ 呼び出し元がnullだとNPE発生 |

---

# ✨ 超シンプルまとめ

> matches()は「文字列全体が正規表現に一致するか」！
部分一致ではないので注意！
正規表現の特殊文字（特にピリオド）に注意！
> 

✅ この感覚を押さえれば、試験も実務でもバッチリ使いこなせます！

以下に、**「Pattern/Matcher.find()とString.matches()の違いを押さえるクロス演習セット（全文一致 vs 部分一致 全8問）」** をご用意しました！

- *全文一致（matches）と部分一致（find）**の違いにフォーカスして、

実戦で間違えない力を身につける内容になっています！

---

# 🔺 Pattern/Matcher.find() vs String.matches() クロス演習セット

---

## 【問題編】

---

### ❓ 問題 1：matches()で"abc123"が"[0-9]+"にマッチするか？

```java
String s = "abc123";
System.out.println(s.matches("[0-9]+"));
```

### ✅ 問題 1の答え

**答え**：B. false

**解説**：

- `matches()`は文字列全体が対象 → "abc"があるのでダメ！

---

### ❓ 問題 2：find()で"abc123"が"[0-9]+"にマッチするか？

```java
Pattern p = Pattern.compile("[0-9]+");
Matcher m = p.matcher("abc123");
System.out.println(m.find());
```

### ✅ 問題 2の答え

**答え**：A. true

**解説**：

- `find()`は部分一致 → "123"の部分が見つかる！

---

### ❓ 問題 3：matches()で"abc123xyz"が"123"にマッチするか？

```java
String s = "abc123xyz";
System.out.println(s.matches("123"));

```

### ✅ 問題 3の答え

**答え**：B. false

**解説**：

- "abc123xyz"は文字列全体と"123"が一致してない！

---

### ❓ 問題 4：find()で"abc123xyz"が"123"に見つかるか？

```java
Pattern p = Pattern.compile("123");
Matcher m = p.matcher("abc123xyz");
System.out.println(m.find());
```

### ✅ 問題 4の答え

**答え**：A. true

**解説**：

- "123"の部分が見つかる！

---

### ❓ 問題 5：matches()で"hello"が".+"にマッチするか？

```java
String s = "hello";
System.out.println(s.matches(".+"));

```

### ✅ 問題 5の答え

**答え**：A. true

**解説**：

- ".+"は「1文字以上何でもOK」 → "hello"はOK！

---

### ❓ 問題 6：空文字に対してmatches(".+")は？

```java
String s = "";
System.out.println(s.matches(".+"));
```

### ✅ 問題 6の答え

**答え**：B. false

**解説**：

- ".+"は「1文字以上必要」→空文字はマッチしない！

---

### ❓ 問題 7：find()で空文字に対してパターン".+"は？

```java
Pattern p = Pattern.compile(".+");
Matcher m = p.matcher("");
System.out.println(m.find());
```

### ✅ 問題 7の答え

**答え**：B. false

**解説**：

- `find()`も対象が空文字なので見つからない！

---

### ❓ 問題 8：find()を複数回呼び出すと？

```java
Pattern p = Pattern.compile("[0-9]+");
Matcher m = p.matcher("abc123xyz456");

while (m.find()) {
    System.out.println(m.group());
}
```

### ✅ 問題 8の答え

**答え**：A. `"123"`, `"456"`

**解説**：

- `find()`は**複数回**マッチできる！
- 最初に"123"、次に"456"をそれぞれ見つける！

---

# ✅ matches() vs find() 比較表

| 比較観点 | matches() | find() |
| --- | --- | --- |
| 全体 or 部分？ | ✅ 全体一致のみ | ✅ 部分一致OK |
| 1回だけ判定か？ | ✅ 1回だけ | ✅ 複数回探せる（繰り返しfindできる） |
| 空文字にマッチする？ | ❌ ".+"は空文字にマッチしない | ❌ ".+"は空文字にもマッチしない |
| 使いどころ | フォーマット検証（電話番号・郵便番号など） | 部分検索（パターン抽出・データ抽出など） |

---

# ✨ 超シンプルまとめ

> matches()＝全文一致判定！
find()＝部分一致検出！
使いどころを正しく使い分けるのがプロ！
> 

✅ この感覚を押さえれば、試験・実務でもプロレベルで使いこなせます！