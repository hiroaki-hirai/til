# codePoints()

`String.codePoints()` ã¯ Java ã«ãŠã„ã¦ã€

**æ–‡å­—åˆ—ã®ã™ã¹ã¦ã® Unicode ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’é †ç•ªã«æµã™ãŸã‚ã® `IntStream` ã‚’è¿”ã™ãƒ¡ã‚½ãƒƒãƒ‰**ã§ã™ã€‚

ã¤ã¾ã‚Šã€**ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚‚æ­£ã—ã1æ–‡å­—ã¨ã—ã¦æ‰±ã„ãªãŒã‚‰ã€å…¨ä½“ã‚’é †ã«å‡¦ç†ã§ãã‚‹**å¼·åŠ›ãªAPIã§ã™ï¼

---

# âœ… `String.codePoints()` ã®åŸºæœ¬æƒ…å ±

| é …ç›® | å†…å®¹ |
| --- | --- |
| æ‰€å±ã‚¯ãƒ©ã‚¹ | `java.lang.String`ï¼ˆã‚¤ãƒ³ãƒãƒ¼ãƒˆä¸è¦ï¼‰ |
| ãƒ¡ã‚½ãƒƒãƒ‰å | `codePoints()` |
| æˆ»ã‚Šå€¤ã®å‹ | `IntStream`ï¼ˆjava.util.stream.IntStreamï¼‰ |
| ä¸»ãªç”¨é€” | æ–‡å­—åˆ—ã®å„ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§å‡¦ç†ã™ã‚‹ |

---

# ğŸ”¹ ã‚·ã‚°ãƒãƒãƒ£ï¼ˆå®šç¾©ï¼‰

```java
public IntStream codePoints()
```

- å¼•æ•°ãªã—
- æˆ»ã‚Šå€¤ã¯ `IntStream`
    - å„è¦ç´ ã¯ã€æ–‡å­—åˆ—å†…ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ`int`ï¼‰ã‚’è¡¨ã™

---

# ğŸ”¹ ä½¿ç”¨ä¾‹ï¼ˆåŸºæœ¬ï¼‰

```java
String s = "Java";
s.codePoints()
 .forEach(cp -> System.out.println(cp));
```

å‡ºåŠ›ï¼š

```java
74   // 'J'
97   // 'a'
118  // 'v'
97   // 'a'
```

âœ… å„æ–‡å­—ã® Unicode ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ10é€²æ•°ï¼‰ãŒé †ã«å‡ºåŠ›ã•ã‚Œã¾ã™ï¼

---

# ğŸ”¹ ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢å¯¾å¿œï¼ˆé‡è¦ï¼‰

ãŸã¨ãˆã°ã€çµµæ–‡å­—ã‚’å«ã‚€æ–‡å­—åˆ—ï¼š

```java
String emoji = "Ağ©¸½B"; // 'A' + 'ğ©¸½'ï¼ˆã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ï¼‰ + 'B'

emoji.codePoints()
     .forEach(cp -> System.out.println(cp));
```

å‡ºåŠ›ï¼š

```java
65      // 'A'
171069  // 'ğ©¸½'ï¼ˆU+29E3Dï¼‰
66      // 'B'
```

âœ… ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚‚1ã¤ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦æ­£ã—ãæµã‚Œã¦ãã‚‹ï¼

---

# ğŸ”¹ ã‚ˆãã‚ã‚‹ç”¨é€”ä¾‹

- **çµµæ–‡å­—ã‚„ç‰¹æ®Šæ–‡å­—ã‚’æ­£ã—ãå‡¦ç†ã—ãŸã„ã¨ã**
- **æ–‡å­—åˆ—ã‹ã‚‰ç‰¹å®šã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼/ãƒãƒƒãƒ”ãƒ³ã‚°ã—ãŸã„ã¨ã**
- **Unicodeç¯„å›²ã”ã¨ã®å‡¦ç†ï¼ˆçµµæ–‡å­—ã ã‘ã€æ¼¢å­—ã ã‘ãªã©ï¼‰**
- **æ–‡å­—åˆ—é•·ï¼ˆè¦‹ãŸç›®ã®æ–‡å­—æ•°ï¼‰ã‚’æ•°ãˆãŸã„ã¨ã**

---

# ğŸ”¹ ã‚ˆãä½¿ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆå¿œç”¨ï¼‰

### ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æ–‡å­—åˆ—ã«æˆ»ã™

```java
String s = "Ağ©¸½B";
String result = s.codePoints()
                 .mapToObj(cp -> new String(Character.toChars(cp)))
                 .collect(Collectors.joining());
System.out.println(result); // â†’ "Ağ©¸½B"
```

âœ… ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ—ã‚’ã‚‚ã¨ã«å†æ§‹æˆï¼

---

# ğŸ”¸ `String.codePoints()` vs `chars()`

| æ¯”è¼ƒé …ç›® | `codePoints()` | `chars()` |
| --- | --- | --- |
| ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®å‹ | `IntStream`ï¼ˆã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆå˜ä½ï¼‰ | `IntStream`ï¼ˆcharå˜ä½ï¼‰ |
| ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢å¯¾å¿œ | âœ… æ­£ã—ãã¾ã¨ã‚ã¦å‡¦ç†ã™ã‚‹ | âŒ ä¸Šä¸‹ã‚µãƒ­ã‚²ãƒ¼ãƒˆåˆ¥ã€…ã«å‡¦ç†ã™ã‚‹ |
| ç”¨é€” | Unicodeãƒ•ãƒ«å¯¾å¿œ | å˜ç´”ãªASCIIãƒ»å˜ä¸€æ–‡å­—å‘ã‘ |

---

# âœ… ã¾ã¨ã‚

| ç‰¹å¾´ | å†…å®¹ |
| --- | --- |
| ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢å¯¾å¿œ | âœ…ï¼ˆä¸Šä½ï¼‹ä¸‹ä½ã¾ã¨ã‚ã¦1ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰ |
| æˆ»ã‚Šå€¤ | `IntStream`ï¼ˆè¦ç´ ã¯intå‹ï¼‰ |
| å…¸å‹ç”¨é€” | çµµæ–‡å­—å¯¾å¿œã€Unicodeãƒ™ãƒ¼ã‚¹æ–‡å­—å‡¦ç† |
| `chars()`ã¨ã®é•ã„ | `chars()`ã¯charå˜ä½ã€`codePoints()`ã¯æ–‡å­—å˜ä½ |

---

# âœ¨ è¶…ã‚·ãƒ³ãƒ—ãƒ«ã¾ã¨ã‚

> codePoints() ã¯ã€Œäººé–“ãŒè¦‹ã‚‹æ„å‘³ã§ã®æ–‡å­—ã€ã‚’é †ç•ªã«æµã™
> 

âœ… ã“ã†è¦šãˆã‚Œã°é–“é•ãˆã¾ã›ã‚“ï¼

---

# ğŸ”º `String.codePoints()` å¼•ã£ã‹ã‘å•é¡Œé›†ï¼ˆå…¨5å•ï¼‰

---

### â“ å•é¡Œ 1ï¼šæˆ»ã‚Šå€¤ã®å‹

```java
String s = "Java";
var stream = s.codePoints();
System.out.println(stream.getClass().getSimpleName());
```

å‡ºåŠ›ã¯ï¼Ÿ

A. `Stream<Integer>`

B. `IntStream`

C. `List<Integer>`

D. `Stream<String>`

**ç­”ãˆ**ï¼šB. `IntStream`

**è§£èª¬**ï¼š

âœ… `codePoints()` ã®æˆ»ã‚Šå€¤ã¯ **`IntStream`ï¼ˆãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–intãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒˆãƒªãƒ¼ãƒ ï¼‰**ã€‚

`Stream<Integer>` ã§ã¯ãªã„ï¼

---

### â“ å•é¡Œ 2ï¼šé€šå¸¸æ–‡å­—åˆ—ã®å ´åˆã®å„è¦ç´ 

```java
String s = "ABC";
s.codePoints().forEach(cp -> System.out.print(cp + " "));
```

å‡ºåŠ›ã«æœ€ã‚‚è¿‘ã„ã‚‚ã®ã¯ï¼Ÿ

A. `65 66 67`

B. `A B C`

C. `1 2 3`

D. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼

**ç­”ãˆ**ï¼šA. `65 66 67`

**è§£èª¬**ï¼š

- 'A' = 65
- 'B' = 66
- 'C' = 67
    
    âœ… ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆæ•°å€¤ï¼‰ã¨ã—ã¦å‡ºåŠ›ã•ã‚Œã‚‹ï¼
    

---

### â“ å•é¡Œ 3ï¼šã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚’å«ã‚€æ–‡å­—åˆ—

```java
String emoji = "Ağ©¸½B"; // 'A' + 'ğ©¸½'(ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢) + 'B'
System.out.println(emoji.codePoints().count());
```

ã“ã®å‡ºåŠ›ã¯ï¼Ÿ

A. `3`

B. `4`

C. `5`

D. å®Ÿè¡Œæ™‚ä¾‹å¤–

**ç­”ãˆ**ï¼šA. `3`

**è§£èª¬**ï¼š

- 'A'ï¼ˆ1ï¼‰
- 'ğ©¸½'ï¼ˆã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã ã‘ã©1ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰
- 'B'ï¼ˆ1ï¼‰

âœ… åˆè¨ˆ3ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼

---

### â“ å•é¡Œ 4ï¼šcodePoints()ã¨chars()ã®é•ã„

æ¬¡ã®ã†ã¡ã€**æ­£ã—ãã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã‚’1æ–‡å­—æ‰±ã„ã™ã‚‹**ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã©ã‚Œï¼Ÿ

A. `String.chars()`

B. `String.codePoints()`

C. `String.getBytes()`

D. `String.split("")`

**ç­”ãˆ**ï¼šB. `String.codePoints()`

**è§£èª¬**ï¼š

- `chars()` ã¯UTF-16ã®**charå˜ä½**ã§æµã™ â†’ ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ãŒåˆ†é›¢ã•ã‚Œã‚‹
- `codePoints()` ã¯**äººé–“ãŒè¦‹ã‚‹æ–‡å­—ï¼ˆã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆå˜ä½ï¼‰**ã§æµã™ï¼

---

### â“ å•é¡Œ 5ï¼šStreamã®å„è¦ç´ ã‚’æ–‡å­—åˆ—åŒ–ã™ã‚‹å ´åˆ

```java
String s = "AB";
String result = s.codePoints()
                 .mapToObj(cp -> (char) cp)
                 .collect(Collectors.joining());
System.out.println(result);
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã®çµæœã¯ï¼Ÿ

A. `"AB"`

B. `"6566"`

C. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼

D. å®Ÿè¡Œæ™‚ä¾‹å¤–

**ç­”ãˆ**ï¼šC. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼

**è§£èª¬**ï¼š

- `mapToObj(cp -> (char)cp)` ã¯ `char` ã‚’è¿”ã™ãŒã€`Collectors.joining()` ã¯**Stringå‹**ã®Streamã‚’æœŸå¾…ã™ã‚‹ã€‚
- ãã®ã¾ã¾ã ã¨å‹ãŒåˆã‚ãšã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ï¼

âœ… æ­£ã—ã„ã®ã¯ï¼š

```java
.mapToObj(cp -> new String(Character.toChars(cp)))
```

---

# âœ… ã‚ˆãã‚ã‚‹èª¤è§£ã¾ã¨ã‚

| èª¤è§£å†…å®¹ | æ­£ã—ã„ç†è§£ |
| --- | --- |
| `codePoints()` ã¯ Stream<Integer> ã‚’è¿”ã™ï¼Ÿ | âŒ IntStreamï¼ˆãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–intã‚¹ãƒˆãƒªãƒ¼ãƒ ï¼‰ |
| `codePoints()` ã¯æ–‡å­—åˆ—ã§æµã™ï¼Ÿ | âŒ intï¼ˆæ•°å€¤ï¼‰ã§æµã™ |
| `chars()` ã‚‚ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢å¯¾å¿œï¼Ÿ | âŒ chars()ã¯UTF-16ã®charå˜ä½ï¼ˆã‚µãƒ­ã‚²ãƒ¼ãƒˆåˆ†é›¢ã™ã‚‹ï¼‰ |
| ã‚µãƒ­ã‚²ãƒ¼ãƒˆãƒšã‚¢ã¯2æ–‡å­—ã‚«ã‚¦ãƒ³ãƒˆï¼Ÿ | âŒ codePoints()ãªã‚‰æ­£ã—ã1æ–‡å­—ã‚«ã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ |