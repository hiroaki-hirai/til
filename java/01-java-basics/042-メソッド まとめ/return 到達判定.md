# return åˆ°é”åˆ¤å®š

ä»¥ä¸‹ã«ã€Javaã§ã€Œ`return` æ–‡ã®å¾Œã«è¨˜è¿°ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã€ãŒ**åˆ°é”å¯èƒ½ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹ä»£è¡¨çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ä¾‹**ã‚’æ•´ç†ã—ã¦ãŠè¦‹ã›ã—ã¾ã™ã€‚

---

## âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ¥ï¼šåˆ°é”å¯èƒ½ã‹ã©ã†ã‹ä¸€è¦§

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | åˆ°é”å¯èƒ½ã‹ï¼Ÿ | èª¬æ˜ |
| --- | --- | --- |
| `return` ç›´å¾Œã«æ–‡ã‚’æ›¸ã | âŒ åˆ°é”ä¸èƒ½ | ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ |
| `if` æ–‡ã§åˆ†å² | âœ… åˆ°é”å¯èƒ½ | æ¡ä»¶ã«ã‚ˆã‚Šå®Ÿè¡Œã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ |
| `if (true)` ã®å¾Œã« return | âŒ åˆ°é”ä¸èƒ½ | å®Ÿè³ªçš„ã« return ã—ã‹ãªã„ |
| `while(true)` ã§ return | âŒ åˆ°é”ä¸èƒ½ | return ã§ãƒ«ãƒ¼ãƒ—ãŒå¿…ãšçµ‚ã‚ã‚‹ |
| `for` æ–‡ã§ return ã«è‡³ã‚‰ãªã„å¯èƒ½æ€§ã‚ã‚Š | âœ… åˆ°é”å¯èƒ½ | æ¡ä»¶ã«ã‚ˆã£ã¦ return ã«è‡³ã‚‰ãªã„ |
| `try-catch-finally` æ§‹é€ å†…ã® return | âŒ / âœ… | finally ã®å¾Œã¯åŸå‰‡åˆ°é”ä¸èƒ½ |

---

## ğŸ” å„ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã‚³ãƒ¼ãƒ‰ä¾‹

### âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šreturnã®ã‚ã¨ã«æ–‡ã‚’æ›¸ãï¼ˆåˆ°é”ä¸èƒ½ï¼‰

```java
public int test1() {
    return 1;
    System.out.println("ã“ã‚Œã¯ã‚¨ãƒ©ãƒ¼"); // åˆ°é”ä¸èƒ½ â†’ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
}
```

---

### âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šifæ–‡ã«ã‚ˆã‚‹åˆ†å²ï¼ˆåˆ°é”å¯èƒ½ï¼‰

```java
public int test2(boolean flag) {
    if (flag) {
        return 1;
    }
    System.out.println("flagãŒfalseã®ã¨ãã¯ã“ã“ã«åˆ°é”å¯èƒ½"); // OK
    return 2;
}
```

---

### âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¢ï¼šif (true) ã® returnï¼ˆåˆ°é”ä¸èƒ½ï¼‰

```java
public int test3() {
    if (true) {
        return 1;
    }
    System.out.println("ã“ã‚Œã¯åˆ°é”ä¸èƒ½"); // ã‚¨ãƒ©ãƒ¼
}
```

---

### âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘£ï¼šwhile(true) ã§å¿…ãš returnï¼ˆåˆ°é”ä¸èƒ½ï¼‰

```java
public int test4() {
    while (true) {
        return 1;
    }
    System.out.println("ã“ã‚Œã¯åˆ°é”ä¸èƒ½"); // ã‚¨ãƒ©ãƒ¼
}
```

---

### âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¤ï¼šforæ–‡ã§æ¡ä»¶ã«ã‚ˆã£ã¦ã¯ return ã•ã‚Œãªã„å ´åˆï¼ˆåˆ°é”å¯èƒ½ï¼‰

```java
public int test5() {
    for (int i = 0; i < 5; i++) {
        if (i == 2) return 2;
    }
    System.out.println("ãƒ«ãƒ¼ãƒ—ãŒreturnã—ãªã‘ã‚Œã°åˆ°é”å¯èƒ½"); // OK
    return 0;
}
```

---

### âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¥ï¼štry-finallyå†…ã®returnå¾Œï¼ˆåˆ°é”ä¸èƒ½ï¼‰

```java
public int test6() {
    try {
        return 1;
    } finally {
        System.out.println("finallyå†…ã®æ–‡"); // OK
    }
    System.out.println("ã“ã‚Œã¯åˆ°é”ä¸èƒ½"); // ã‚¨ãƒ©ãƒ¼
}
```

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆï¼ˆè£œè¶³ï¼‰

- Javaã§ã¯**åˆ°é”ä¸èƒ½ã‚³ãƒ¼ãƒ‰ã‚’é™çš„ã«æ¤œå‡ºã—ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã—ã¾ã™**ï¼ˆ`unreachable statement`ï¼‰ã€‚
- `return` / `throw` / ç„¡é™ãƒ«ãƒ¼ãƒ—ï¼ˆ`while(true)`ï¼‰+ `break` ãªã— ãªã©ãŒç›´å‰ã«ã‚ã‚‹ã¨ã€ãã®å¾Œã®ã‚³ãƒ¼ãƒ‰ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚

ã§ã¯æ¬¡ã«ã€ã€Œ**`switchæ–‡` ã‚„ `ãƒ©ãƒ ãƒ€å¼` ã® return ã«é–¢ã™ã‚‹åˆ°é”ä¸èƒ½ã‚³ãƒ¼ãƒ‰ã®ãƒ‘ã‚¿ãƒ¼ãƒ³**ã€ã«ã¤ã„ã¦ã€ä»£è¡¨ä¾‹ã‚’äº¤ãˆã¦æ•´ç†ã—ã¾ã™ã€‚

---

## ğŸ§­ Part 2: `switchæ–‡` ã¨ `ãƒ©ãƒ ãƒ€å¼` ã«ãŠã‘ã‚‹ `return` ã®åˆ°é”æ€§ãƒ‘ã‚¿ãƒ¼ãƒ³

---

### ğŸ”· `switch` æ–‡ã«ãŠã‘ã‚‹ `return` ã®åˆ°é”æ€§

### âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šå„ `case` ã« `return`ã€`default` ãªã— â†’ åˆ°é”å¯èƒ½

```java
public int testSwitch1(int x) {
    switch (x) {
        case 1: return 10;
        case 2: return 20;
    }
    System.out.println("switchãŒã©ã®caseã«ã‚‚å½“ã¦ã¯ã¾ã‚‰ãªã‘ã‚Œã°å®Ÿè¡Œã•ã‚Œã‚‹"); // OK
    return 0;
}
```

âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šå…¨ `case` ã¨ `default` ã« `return` ãŒã‚ã‚Šã€ãã®å¾Œã«æ–‡ã‚’æ›¸ã

```java
public int testSwitch3(int x) {
    switch (x) {
        case 1:
            return 100;
        case 2:
            break;
        default:
            System.out.println("defaultç¯€å®Ÿè¡Œ");
    }
    return 0; // OKï¼ˆå…¨ã¦ã®ãƒ‘ã‚¹ãŒ return ã§ã¯ãªã„ï¼‰
}
```

âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¢ï¼š`break` ã¨ `return` æ··åœ¨ â†’ `return` å¾Œã®ã‚³ãƒ¼ãƒ‰æ³¨æ„

```java
public int testSwitch3(int x) {
    switch (x) {
        case 1:
            return 100;
        case 2:
            break;
        default:
            System.out.println("defaultç¯€å®Ÿè¡Œ");
    }
    return 0; // OKï¼ˆå…¨ã¦ã®ãƒ‘ã‚¹ãŒ return ã§ã¯ãªã„ï¼‰
}
```

---

### ğŸ”· ãƒ©ãƒ ãƒ€å¼ã«ãŠã‘ã‚‹ `return` ã®æ‰±ã„

### âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šå¼å½¢å¼ï¼ˆæˆ»ã‚Šå€¤ãŒã‚ã‚‹ï¼‰â†’ `return` ä¸è¦

```java
Function<Integer, Integer> func1 = x -> x + 1; // OKï¼ˆå¼ã®ã¿ï¼‰
```

âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šãƒ–ãƒ­ãƒƒã‚¯å½¢å¼ã§ `return` ä½¿ç”¨ â†’ OK

```java
Function<Integer, Integer> func2 = x -> {
    return x + 1;
}
```

âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¢ï¼š`return` ã®ã‚ã¨ã«æ–‡ã‚’ç½®ã â†’ åˆ°é”ä¸èƒ½

```java
Function<Integer, Integer> func3 = x -> {
    return x + 1;
    // System.out.println("ã“ã‚Œã¯åˆ°é”ä¸èƒ½"); // ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
};
```

---

## ğŸ“Œ è£œè¶³ï¼šãƒ©ãƒ ãƒ€å¼ã®ã‚¹ã‚³ãƒ¼ãƒ—ã¨ `return`

- `return` ã¯**ãƒ©ãƒ ãƒ€å¼å†…ã®å‡¦ç†ãƒ–ãƒ­ãƒƒã‚¯ã‹ã‚‰ã®è„±å‡º**ã‚’æ„å‘³ã—ã¾ã™ã€‚
- **`return` å¾Œã«æ›¸ã„ãŸæ–‡ã¯çµ¶å¯¾ã«å®Ÿè¡Œã•ã‚Œãªã„ãŸã‚ã€åŒæ§˜ã«åˆ°é”ä¸èƒ½ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚**

---

## ğŸ”š ã¾ã¨ã‚ï¼š`switch`ãƒ»`ãƒ©ãƒ ãƒ€` åˆ°é”æ€§ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

| æ–‡è„ˆ | `return` å¾Œã«è¨˜è¿°å¯èƒ½ï¼Ÿ | å‚™è€ƒ |
| --- | --- | --- |
| switchæ–‡å…¨ä½“ãŒå…¨ã¦ return ã§é–‰ã˜ã‚‰ã‚Œã¦ã„ã‚‹ | âŒ NG | defaultã‚ã‚Š returnå®Œçµå‹ |
| switchæ–‡ã«æœªç¶²ç¾…ã®ãƒ‘ã‚¹ãŒã‚ã‚‹å ´åˆï¼ˆe.g., caseæ¼ã‚Œï¼‰ | âœ… OK | returnå¾Œã«æ–‡ãŒã‚ã£ã¦ã‚‚è‰¯ã„ |
| ãƒ©ãƒ ãƒ€å¼ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ return ã—ãŸå¾Œã«æ–‡ã‚’æ›¸ã | âŒ NG | åˆ°é”ä¸èƒ½ã«ãªã‚‹ |

ã§ã¯ç¶šã‘ã¦ã€**Java 14ä»¥é™ã® `switchå¼`** ã‚„ã€**`ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿` ã®ä¸­ã§ã® `return`** ã«ãŠã‘ã‚‹ã€Œåˆ°é”ä¸èƒ½ã‚³ãƒ¼ãƒ‰ã€ã®æ‰±ã„ã‚’è§£èª¬ã—ã¾ã™ã€‚

---

## ğŸ§­ Part 3: `switchå¼` ã¨ `ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿` ã«ãŠã‘ã‚‹ `return` ã®åˆ°é”æ€§ãƒ‘ã‚¿ãƒ¼ãƒ³

---

### ğŸ”· `switchå¼`ï¼ˆJava 14ä»¥é™ï¼‰

Java 14 ã‹ã‚‰å°å…¥ã•ã‚ŒãŸ `switch` ã¯ **å¼** ã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚

ã“ã®å½¢å¼ã§ã¯ã€**å„åˆ†å²ãŒ `return` ã§ã¯ãªã `â†’` ã¾ãŸã¯ `yield` ã‚’ä½¿ã£ã¦å€¤ã‚’è¿”ã™**ãŸã‚ã€å°‘ã—æ€§è³ªãŒç•°ãªã‚Šã¾ã™ã€‚

---

### âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šswitchå¼ã®å€¤ã‚’è¿”ã™ï¼ˆã™ã¹ã¦ç¶²ç¾…ã•ã‚Œã¦ã„ãªã„ï¼‰â†’ åˆ°é”å¯èƒ½

```java
public int testSwitchExpr1(String color) {
    int result = switch (color) {
        case "red" -> 1;
        case "blue" -> 2;
        default -> 0;
    };
    System.out.println("switchå¼ã®å¾Œã¯åˆ°é”å¯èƒ½"); // OK
    return result;
}
```

---

### âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šswitchå¼ãŒå…¨ã¦ã®åˆ†å²ã§ `yield` or `â†’` ã§å€¤ã‚’è¿”ã—ã¦ return ã™ã‚‹å½¢ã€å¾Œç¶šã«æ–‡ã‚’æ›¸ã â†’ åˆ°é”ä¸èƒ½

```java
public int testSwitchExpr2(String color) {
    return switch (color) {
        case "red" -> 1;
        case "blue" -> 2;
        default -> 0;
    };
    System.out.println("ã“ã‚Œã¯åˆ°é”ä¸èƒ½"); // âŒ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
}
```

---

### ğŸ§© è£œè¶³ï¼š`yield` ã¨ `â†’` ã®é•ã„ï¼ˆç°¡ç•¥ï¼‰

```java
// è¤‡æ•°æ–‡ã‚’è¨˜è¿°ã—ãŸã„ã¨ãã¯ yield ã‚’ä½¿ã†
int result = switch (value) {
    case 1 -> 10;
    case 2 -> {
        System.out.println("è¤‡æ•°æ–‡");
        yield 20; // å€¤ã‚’è¿”ã™
    }
    default -> 0;
};
```

---

### ğŸ”· ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å†…ã® `return`

Javaã®**ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ã¯ã€æˆ»ã‚Šå€¤ã‚’è¿”ã™ `return` ã¯æ›¸ã‘ã¾ã›ã‚“**ã€‚

ãŸã ã—ã€**`return;`ï¼ˆå€¤ãªã—ã® returnï¼‰ã‚’ä½¿ã£ã¦æ—©æœŸãƒªã‚¿ãƒ¼ãƒ³ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™**ã€‚

---

### âœ… ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å†…ã§æ¡ä»¶ã«ã‚ˆã£ã¦ `return;`ï¼ˆæ—©æœŸçµ‚äº†ï¼‰

```java
public class Person {
    public Person(String name) {
        if (name == null) {
            System.out.println("åå‰ãŒnullã®ãŸã‚ä¸­æ–­");
            return; // OK
        }
        System.out.println("åå‰ï¼š" + name);
    }
}
```

---

### âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼š`return` å¾Œã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã â†’ åˆ°é”ä¸èƒ½

```java
public class Person {
    public Person(String name) {
        return;
        // System.out.println("ã“ã‚Œã¯åˆ°é”ä¸èƒ½"); // âŒ ã‚¨ãƒ©ãƒ¼
    }
}
```

---

### âŒ ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¢ï¼šå€¤ã‚’è¿”ã™ `return` ã‚’æ›¸ã â†’ æ–‡æ³•ã‚¨ãƒ©ãƒ¼

```java
public class Person {
    public Person(String name) {
        // return name; // âŒ ã‚¨ãƒ©ãƒ¼ï¼šã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã¯å€¤ã‚’è¿”ã›ãªã„
    }
}
```

---

## ğŸ§© è£œè¶³ï¼šãƒ¡ã‚½ãƒƒãƒ‰ vs ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã® `return`

| åŒºåˆ† | `return å€¤ã‚ã‚Š` | `return å€¤ãªã—` | å‚™è€ƒ |
| --- | --- | --- | --- |
| ãƒ¡ã‚½ãƒƒãƒ‰ | âœ… OK | âœ… OK | æˆ»ã‚Šå€¤å‹ã«ã‚ˆã‚‹åˆ¶å¾¡ |
| ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ | âŒ ã‚¨ãƒ©ãƒ¼ | âœ… OK | æˆ»ã‚Šå€¤ã¯æŒã¦ãªã„ |

---

## âœ… ã¾ã¨ã‚ï¼ˆPart 3ï¼‰

| æ–‡è„ˆ | åˆ°é”ä¸èƒ½ã‚³ãƒ¼ãƒ‰ã®å¯èƒ½æ€§ | å‚™è€ƒ |
| --- | --- | --- |
| switchå¼ï¼ˆJava14ä»¥é™ï¼‰ã§ return ç›´å¾Œã«æ–‡ã‚’æ›¸ã | âŒ ã‚¨ãƒ©ãƒ¼ | switchå¼ãŒreturnã•ã‚Œã‚‹ã¨å¾Œã¯åˆ°é”ä¸èƒ½ |
| switchå¼ã®è©•ä¾¡å¾Œã®æ–‡ | âœ… OK | return ã—ãªã‘ã‚Œã°å•é¡Œãªã— |
| ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å†…ã§ `return;` å¾Œã«æ–‡ã‚’æ›¸ã | âŒ ã‚¨ãƒ©ãƒ¼ | é€šå¸¸ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¨åŒæ§˜ã«æ‰±ã‚ã‚Œã‚‹ |
| ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã§ `return å€¤;` ã‚’æ›¸ã | âŒ ã‚¨ãƒ©ãƒ¼ | æ–‡æ³•çš„ã«ç¦æ­¢ |